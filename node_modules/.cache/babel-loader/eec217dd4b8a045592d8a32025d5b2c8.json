{"ast":null,"code":"import _construct from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport React, { forwardRef, useRef, useEffect, useLayoutEffect, useState, useMemo } from 'react';\nimport { extend, useThree, useFrame, useUpdate, useLoader, applyProps } from 'react-three-fiber';\nimport { OrbitControls as OrbitControls$1, MapControls as MapControls$1 } from 'three/examples/jsm/controls/OrbitControls';\nimport mergeRefs from 'react-merge-refs';\nimport { TrackballControls as TrackballControls$1 } from 'three/examples/jsm/controls/TrackballControls';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { TransformControls as TransformControls$1 } from 'three/examples/jsm/controls/TransformControls';\nimport { AudioListener, AudioLoader, HalfFloatType, Vector3, PerspectiveCamera as PerspectiveCamera$1, OrthographicCamera as OrthographicCamera$1, Color, ShaderChunk, Matrix4, Ray, Sphere, Raycaster } from 'three';\nimport { SMAAImageLoader, EffectComposer, RenderPass, SMAAEffect, NormalPass, SSAOEffect, BlendFunction, BloomEffect, KernelSize, EffectPass } from 'postprocessing';\nimport { TextMesh } from 'troika-3d-text/dist/textmesh-standalone.umd';\nimport ReactDOM from 'react-dom';\nimport StatsImpl from 'stats.js';\nimport { Sky as Sky$1 } from 'three/examples/jsm/objects/Sky';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\nextend({\n  OrbitControlsImpl: OrbitControls$1\n});\nvar OrbitControls = forwardRef(function () {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    enableDamping: true\n  };\n  var ref = arguments.length > 1 ? arguments[1] : undefined;\n  var controls = useRef();\n  var _useThree = useThree(),\n    camera = _useThree.camera,\n    gl = _useThree.gl,\n    invalidate = _useThree.invalidate;\n  useFrame(function () {\n    var _controls$current;\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(function () {\n    var _controls$current2;\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"orbitControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\nextend({\n  MapControlsImpl: MapControls$1\n});\nvar MapControls = forwardRef(function () {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    enableDamping: true\n  };\n  var ref = arguments.length > 1 ? arguments[1] : undefined;\n  var controls = useRef();\n  var _useThree2 = useThree(),\n    camera = _useThree2.camera,\n    gl = _useThree2.gl,\n    invalidate = _useThree2.invalidate;\n  useFrame(function () {\n    var _controls$current;\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(function () {\n    var _controls$current2;\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"mapControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\nextend({\n  TrackballControlsImpl: TrackballControls$1\n});\nvar TrackballControls = forwardRef(function (props, ref) {\n  var controls = useRef();\n  var _useThree3 = useThree(),\n    camera = _useThree3.camera,\n    gl = _useThree3.gl,\n    invalidate = _useThree3.invalidate;\n  useFrame(function () {\n    var _controls$current;\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(function () {\n    var _controls$current2;\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"trackballControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\nextend({\n  TransformControlsImpl: TransformControls$1\n});\nvar TransformControls = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n  var controls = useRef();\n  var group = useRef();\n  var _useThree4 = useThree(),\n    camera = _useThree4.camera,\n    gl = _useThree4.gl,\n    invalidate = _useThree4.invalidate;\n  useLayoutEffect(function () {\n    var _controls$current;\n    return void ((_controls$current = controls.current) == null ? void 0 : _controls$current.attach(group.current));\n  }, [children]);\n  useEffect(function () {\n    var _controls$current2;\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return function () {\n      var _controls$current3;\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"transformControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props)), /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children));\n});\nvar Detailed = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    distances = _ref.distances,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n  var lod = useUpdate(function (lod) {\n    lod.levels.length = 0;\n    lod.children.forEach(function (object, index) {\n      return lod.levels.push({\n        object: object,\n        distance: distances[index]\n      });\n    });\n  }, []);\n  useFrame(function (state) {\n    var _lod$current;\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\nvar PositionalAudio = forwardRef(function (_ref, ref) {\n  var url = _ref.url,\n    _ref$distance = _ref.distance,\n    distance = _ref$distance === void 0 ? 1 : _ref$distance,\n    _ref$loop = _ref.loop,\n    loop = _ref$loop === void 0 ? true : _ref$loop,\n    props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n  var sound = useRef();\n  var _useThree5 = useThree(),\n    camera = _useThree5.camera;\n  var _useState = useState(function () {\n      return new AudioListener();\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    listener = _useState2[0];\n  var buffer = useLoader(AudioLoader, url);\n  useEffect(function () {\n    var _sound$current, _sound$current2, _sound$current3, _sound$current4;\n    (_sound$current = sound.current) == null ? void 0 : _sound$current.setBuffer(buffer);\n    (_sound$current2 = sound.current) == null ? void 0 : _sound$current2.setRefDistance(distance);\n    (_sound$current3 = sound.current) == null ? void 0 : _sound$current3.setLoop(loop);\n    (_sound$current4 = sound.current) == null ? void 0 : _sound$current4.play();\n    camera.add(listener);\n    return function () {\n      return void camera.remove(listener);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\nvar PerspectiveCamera = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    _ref$makeDefault = _ref.makeDefault,\n    makeDefault = _ref$makeDefault === void 0 ? true : _ref$makeDefault,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n  var _useThree6 = useThree(),\n    setDefaultCamera = _useThree6.setDefaultCamera,\n    camera = _useThree6.camera,\n    size = _useThree6.size;\n  var cameraRef = useUpdate(function (cam) {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(function () {\n    if (makeDefault) {\n      var oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return function () {\n        return setDefaultCamera(oldCam);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\nvar OrthographicCamera = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    _ref$makeDefault2 = _ref.makeDefault,\n    makeDefault = _ref$makeDefault2 === void 0 ? true : _ref$makeDefault2,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n  var _useThree7 = useThree(),\n    setDefaultCamera = _useThree7.setDefaultCamera,\n    camera = _useThree7.camera,\n    size = _useThree7.size;\n  var cameraRef = useUpdate(function (cam) {\n    return cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(function () {\n    if (makeDefault) {\n      var oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return function () {\n        return setDefaultCamera(oldCam);\n      };\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\nfunction StandardEffects(_ref2) {\n  var _ref2$smaa = _ref2.smaa,\n    smaa = _ref2$smaa === void 0 ? true : _ref2$smaa,\n    _ref2$ao = _ref2.ao,\n    ao = _ref2$ao === void 0 ? true : _ref2$ao,\n    _ref2$bloom = _ref2.bloom,\n    bloom = _ref2$bloom === void 0 ? true : _ref2$bloom,\n    _ref2$edgeDetection = _ref2.edgeDetection,\n    edgeDetection = _ref2$edgeDetection === void 0 ? 0.1 : _ref2$edgeDetection,\n    _ref2$bloomOpacity = _ref2.bloomOpacity,\n    bloomOpacity = _ref2$bloomOpacity === void 0 ? 1 : _ref2$bloomOpacity,\n    effects = _ref2.effects;\n  var _useThree8 = useThree(),\n    gl = _useThree8.gl,\n    scene = _useThree8.scene,\n    camera = _useThree8.camera,\n    size = _useThree8.size;\n  var smaaProps = useLoader(SMAAImageLoader, '');\n  var composer = useMemo(function () {\n    var composer = new EffectComposer(gl, {\n      frameBufferType: HalfFloatType\n    });\n    composer.addPass(new RenderPass(scene, camera));\n    var smaaEffect = _construct(SMAAEffect, _toConsumableArray(smaaProps));\n    smaaEffect.colorEdgesMaterial.setEdgeDetectionThreshold(edgeDetection);\n    var normalPass = new NormalPass(scene, camera);\n    var ssaoEffect = new SSAOEffect(camera, normalPass.renderTarget.texture, _extends({\n      blendFunction: BlendFunction.MULTIPLY,\n      samples: 21,\n      // May get away with less samples\n      rings: 4,\n      // Just make sure this isn't a multiple of samples\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.015,\n      // Controls sensitivity based on camera view distance **\n      rangeFalloff: 0.002,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      // Spread range\n      scale: 1.0,\n      // Controls intensity **\n      bias: 0.05\n    }, ao));\n    var bloomEffect = new BloomEffect(_extends({\n      opacity: 1,\n      blendFunction: BlendFunction.SCREEN,\n      kernelSize: KernelSize.VERY_LARGE,\n      luminanceThreshold: 0.9,\n      luminanceSmoothing: 0.07,\n      height: 600\n    }, bloom));\n    bloomEffect.blendMode.opacity.value = bloomOpacity;\n    var effectsArray = [];\n    if (effects) effectsArray = effects([smaaEffect, ssaoEffect, bloomEffect]);else {\n      if (smaa) effectsArray.push(smaaEffect);\n      if (ao) effectsArray.push(ssaoEffect);\n      if (bloom) effectsArray.push(bloomEffect);\n    }\n    var effectPass = _construct(EffectPass, [camera].concat(_toConsumableArray(effectsArray)));\n    effectPass.renderToScreen = true;\n    composer.addPass(normalPass);\n    composer.addPass(effectPass);\n    return composer;\n  }, [camera, gl, scene, smaa, ao, bloom, edgeDetection, bloomOpacity]);\n  useEffect(function () {\n    return void composer.setSize(size.width, size.height);\n  }, [composer, size]);\n  return useFrame(function (_, delta) {\n    return composer.render(delta);\n  }, 1);\n}\nextend({\n  TextMeshImpl: TextMesh\n});\nvar Text = forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n  return /*#__PURE__*/React.createElement(\"textMeshImpl\", _extends({\n    ref: ref,\n    text: children\n  }, props));\n});\nvar v1 = new Vector3();\nvar v2 = new Vector3();\nvar v3 = new Vector3();\nfunction calculatePosition(el, camera, size) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  var widthHalf = size.width / 2;\n  var heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\nfunction isObjectBehindCamera(el, camera) {\n  var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  var deltaCamObj = objectPos.sub(cameraPos);\n  var camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera$1) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var vFOV = camera.fov * Math.PI / 180;\n    var dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n  if (camera instanceof OrthographicCamera$1) return camera.zoom;\n  return 1;\n}\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera$1 || camera instanceof OrthographicCamera$1) {\n    var objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    var cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    var dist = objectPos.distanceTo(cameraPos);\n    var A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    var B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n  return undefined;\n}\nvar HTML = React.forwardRef(function (_ref, ref) {\n  var _portal$current;\n  var children = _ref.children,\n    _ref$eps = _ref.eps,\n    eps = _ref$eps === void 0 ? 0.001 : _ref$eps,\n    style = _ref.style,\n    className = _ref.className,\n    prepend = _ref.prepend,\n    center = _ref.center,\n    fullscreen = _ref.fullscreen,\n    portal = _ref.portal,\n    scaleFactor = _ref.scaleFactor,\n    _ref$zIndexRange = _ref.zIndexRange,\n    zIndexRange = _ref$zIndexRange === void 0 ? [16777271, 0] : _ref$zIndexRange,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n  var _useThree9 = useThree(),\n    gl = _useThree9.gl,\n    scene = _useThree9.scene,\n    camera = _useThree9.camera,\n    size = _useThree9.size;\n  var _useState3 = useState(function () {\n      return document.createElement('div');\n    }),\n    _useState4 = _slicedToArray(_useState3, 1),\n    el = _useState4[0];\n  var group = useRef(null);\n  var old = useRef([0, 0]);\n  var target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(function () {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      var vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n      return function () {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target]);\n  var styles = useMemo(function () {\n    return _extends({\n      position: 'absolute',\n      transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n    }, fullscreen && {\n      top: -size.height / 2,\n      left: -size.width / 2,\n      width: size.width,\n      height: size.height\n    }, {}, style);\n  }, [style, center, fullscreen, size]);\n  useEffect(function () {\n    return void ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n      ref: ref,\n      style: styles,\n      className: className,\n      children: children\n    }), el);\n  });\n  useFrame(function () {\n    if (group.current) {\n      var vec = calculatePosition(group.current, camera, size);\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        var scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\nvar Shadow = forwardRef(function (_ref, ref) {\n  var _ref$fog = _ref.fog,\n    fog = _ref$fog === void 0 ? false : _ref$fog,\n    _ref$colorStop = _ref.colorStop,\n    colorStop = _ref$colorStop === void 0 ? 0.0 : _ref$colorStop,\n    _ref$color = _ref.color,\n    color = _ref$color === void 0 ? 'black' : _ref$color,\n    _ref$opacity = _ref.opacity,\n    opacity = _ref$opacity === void 0 ? 0.5 : _ref$opacity,\n    props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n  var canvas = useMemo(function () {\n    var canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    var context = canvas.getContext('2d');\n    var gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, stop]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\nfunction Stats(_ref3) {\n  var _ref3$showPanel = _ref3.showPanel,\n    showPanel = _ref3$showPanel === void 0 ? 0 : _ref3$showPanel;\n  var _useState5 = useState(function () {\n      return new StatsImpl();\n    }),\n    _useState6 = _slicedToArray(_useState5, 1),\n    stats = _useState6[0];\n  useEffect(function () {\n    stats.showPanel(showPanel);\n    document.body.appendChild(stats.dom);\n    return function () {\n      return document.body.removeChild(stats.dom);\n    };\n  }, []);\n  return useFrame(function (state) {\n    stats.begin();\n    state.gl.render(state.scene, state.camera);\n    stats.end();\n  }, 1);\n}\nextend({\n  SkyImpl: Sky$1\n});\nvar Sky = forwardRef(function (_ref, ref) {\n  var _ref$distance2 = _ref.distance,\n    distance = _ref$distance2 === void 0 ? 450000 : _ref$distance2,\n    _ref$sunPosition = _ref.sunPosition,\n    sunPosition = _ref$sunPosition === void 0 ? [0, 1, 0] : _ref$sunPosition,\n    props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"sunPosition\"]);\n  var scale = useMemo(function () {\n    return new Vector3().setScalar(distance);\n  }, [distance]);\n  return /*#__PURE__*/React.createElement(\"skyImpl\", _extends({\n    ref: ref,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    scale: scale\n  }, props));\n});\nfunction draco() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/draco-gltf/';\n  return function (loader) {\n    var dracoLoader = new DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\nvar pcss = function pcss() {\n  var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref4$frustrum = _ref4.frustrum,\n    frustrum = _ref4$frustrum === void 0 ? 3.75 : _ref4$frustrum,\n    _ref4$size = _ref4.size,\n    size = _ref4$size === void 0 ? 0.005 : _ref4$size,\n    _ref4$near = _ref4.near,\n    near = _ref4$near === void 0 ? 9.5 : _ref4$near,\n    _ref4$samples = _ref4.samples,\n    samples = _ref4$samples === void 0 ? 17 : _ref4$samples,\n    _ref4$rings = _ref4.rings,\n    rings = _ref4$rings === void 0 ? 11 : _ref4$rings;\n  return \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n};\nvar softShadows = function softShadows(props) {\n  var shader = ShaderChunk.shadowmap_pars_fragment;\n  shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n  shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n  ShaderChunk.shadowmap_pars_fragment = shader;\n};\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\nvar _vA = new Vector3();\nfunction meshBounds(raycaster, intersects) {\n  var geometry = this.geometry;\n  var material = this.material;\n  var matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n  _sphere.copy(geometry.boundingSphere);\n  _sphere.applyMatrix4(matrixWorld);\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n  _inverseMatrix.getInverse(matrixWorld);\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\nfunction useCamera(camera, props) {\n  var _useThree10 = useThree(),\n    mouse = _useThree10.mouse;\n  var _useState7 = useState(function () {\n      var raycaster = new Raycaster();\n      if (props) applyProps(raycaster, props, {});\n      return function (_, intersects) {\n        raycaster.setFromCamera(mouse, camera);\n        var rc = this.constructor.prototype.raycast.bind(this);\n        if (rc) rc(raycaster, intersects);\n      };\n    }),\n    _useState8 = _slicedToArray(_useState7, 1),\n    raycast = _useState8[0];\n  return raycast;\n}\nexport { Detailed, HTML, MapControls, OrbitControls, OrthographicCamera, PerspectiveCamera, PositionalAudio, Shadow, Sky, StandardEffects, Stats, Text, TrackballControls, TransformControls, draco, meshBounds, softShadows, useCamera };","map":{"version":3,"names":["_extends","React","forwardRef","useRef","useEffect","useLayoutEffect","useState","useMemo","extend","useThree","useFrame","useUpdate","useLoader","applyProps","OrbitControls","OrbitControls$1","MapControls","MapControls$1","mergeRefs","TrackballControls","TrackballControls$1","_objectWithoutPropertiesLoose","TransformControls","TransformControls$1","AudioListener","AudioLoader","HalfFloatType","Vector3","PerspectiveCamera","PerspectiveCamera$1","OrthographicCamera","OrthographicCamera$1","Color","ShaderChunk","Matrix4","Ray","Sphere","Raycaster","SMAAImageLoader","EffectComposer","RenderPass","SMAAEffect","NormalPass","SSAOEffect","BlendFunction","BloomEffect","KernelSize","EffectPass","TextMesh","ReactDOM","StatsImpl","Sky","Sky$1","DRACOLoader","OrbitControlsImpl","props","enableDamping","ref","controls","camera","gl","invalidate","_controls$current","current","update","_controls$current2","addEventListener","_controls$current3","removeEventListener","createElement","args","domElement","MapControlsImpl","TrackballControlsImpl","TransformControlsImpl","_ref","children","group","attach","Fragment","Detailed","distances","lod","levels","length","forEach","object","index","push","distance","state","_lod$current","PositionalAudio","url","loop","sound","listener","buffer","_sound$current","_sound$current2","_sound$current3","_sound$current4","setBuffer","setRefDistance","setLoop","play","add","remove","makeDefault","setDefaultCamera","size","cameraRef","cam","aspect","width","height","updateProjectionMatrix","oldCam","left","right","top","bottom","StandardEffects","smaa","ao","bloom","edgeDetection","bloomOpacity","effects","scene","smaaProps","composer","frameBufferType","addPass","smaaEffect","colorEdgesMaterial","setEdgeDetectionThreshold","normalPass","ssaoEffect","renderTarget","texture","blendFunction","MULTIPLY","samples","rings","distanceThreshold","distanceFalloff","rangeThreshold","rangeFalloff","luminanceInfluence","radius","scale","bias","bloomEffect","opacity","SCREEN","kernelSize","VERY_LARGE","luminanceThreshold","luminanceSmoothing","blendMode","value","effectsArray","effectPass","renderToScreen","setSize","_","delta","render","TextMeshImpl","Text","text","v1","v2","v3","calculatePosition","el","objectPos","setFromMatrixPosition","matrixWorld","project","widthHalf","heightHalf","x","y","isObjectBehindCamera","cameraPos","deltaCamObj","sub","camDir","getWorldDirection","angleTo","Math","PI","objectScale","vFOV","fov","dist","distanceTo","tan","zoom","objectZIndex","zIndexRange","A","far","near","B","round","undefined","HTML","_portal$current","eps","style","className","prepend","center","fullscreen","portal","scaleFactor","document","old","target","parentNode","updateMatrixWorld","vec","cssText","appendChild","removeChild","unmountComponentAtNode","styles","position","transform","abs","display","zIndex","Shadow","fog","colorStop","color","canvas","context","getContext","gradient","createRadialGradient","addColorStop","getStyle","fillStyle","fillRect","stop","transparent","Stats","showPanel","stats","body","dom","begin","end","SkyImpl","sunPosition","setScalar","draco","loader","dracoLoader","setDecoderPath","setDRACOLoader","pcss","frustrum","softShadows","shader","shadowmap_pars_fragment","replace","_inverseMatrix","_ray","_sphere","_vA","meshBounds","raycaster","intersects","geometry","material","boundingSphere","computeBoundingSphere","copy","applyMatrix4","ray","intersectsSphere","getInverse","boundingBox","intersectBox","origin","point","clone","useCamera","mouse","setFromCamera","rc","constructor","prototype","raycast","bind"],"sources":["/Users/mac/Desktop/react-3js-word-sphere/node_modules/drei/dist/index.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport React, { forwardRef, useRef, useEffect, useLayoutEffect, useState, useMemo } from 'react';\nimport { extend, useThree, useFrame, useUpdate, useLoader, applyProps } from 'react-three-fiber';\nimport { OrbitControls as OrbitControls$1, MapControls as MapControls$1 } from 'three/examples/jsm/controls/OrbitControls';\nimport mergeRefs from 'react-merge-refs';\nimport { TrackballControls as TrackballControls$1 } from 'three/examples/jsm/controls/TrackballControls';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { TransformControls as TransformControls$1 } from 'three/examples/jsm/controls/TransformControls';\nimport { AudioListener, AudioLoader, HalfFloatType, Vector3, PerspectiveCamera as PerspectiveCamera$1, OrthographicCamera as OrthographicCamera$1, Color, ShaderChunk, Matrix4, Ray, Sphere, Raycaster } from 'three';\nimport { SMAAImageLoader, EffectComposer, RenderPass, SMAAEffect, NormalPass, SSAOEffect, BlendFunction, BloomEffect, KernelSize, EffectPass } from 'postprocessing';\nimport { TextMesh } from 'troika-3d-text/dist/textmesh-standalone.umd';\nimport ReactDOM from 'react-dom';\nimport StatsImpl from 'stats.js';\nimport { Sky as Sky$1 } from 'three/examples/jsm/objects/Sky';\nimport { DRACOLoader } from 'three/examples/jsm/loaders/DRACOLoader';\n\nextend({\n  OrbitControlsImpl: OrbitControls$1\n});\nconst OrbitControls = forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return () => {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"orbitControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\n\nextend({\n  MapControlsImpl: MapControls$1\n});\nconst MapControls = forwardRef((props = {\n  enableDamping: true\n}, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return () => {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"mapControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement],\n    enableDamping: true\n  }, props));\n});\n\nextend({\n  TrackballControlsImpl: TrackballControls$1\n});\nconst TrackballControls = forwardRef((props, ref) => {\n  const controls = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useFrame(() => {\n    var _controls$current;\n\n    return (_controls$current = controls.current) == null ? void 0 : _controls$current.update();\n  });\n  useEffect(() => {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return () => {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(\"trackballControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props));\n});\n\nextend({\n  TransformControlsImpl: TransformControls$1\n});\nconst TransformControls = forwardRef((_ref, ref) => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  const controls = useRef();\n  const group = useRef();\n  const {\n    camera,\n    gl,\n    invalidate\n  } = useThree();\n  useLayoutEffect(() => {\n    var _controls$current;\n\n    return void ((_controls$current = controls.current) == null ? void 0 : _controls$current.attach(group.current));\n  }, [children]);\n  useEffect(() => {\n    var _controls$current2;\n\n    (_controls$current2 = controls.current) == null ? void 0 : _controls$current2.addEventListener('change', invalidate);\n    return () => {\n      var _controls$current3;\n\n      return (_controls$current3 = controls.current) == null ? void 0 : _controls$current3.removeEventListener('change', invalidate);\n    };\n  }, [controls.current]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"transformControlsImpl\", _extends({\n    ref: mergeRefs([controls, ref]),\n    args: [camera, gl.domElement]\n  }, props)), /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children));\n});\n\nconst Detailed = forwardRef((_ref, ref) => {\n  let {\n    children,\n    distances\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"distances\"]);\n\n  const lod = useUpdate(lod => {\n    lod.levels.length = 0;\n    lod.children.forEach((object, index) => lod.levels.push({\n      object,\n      distance: distances[index]\n    }));\n  }, []);\n  useFrame(state => {\n    var _lod$current;\n\n    return (_lod$current = lod.current) == null ? void 0 : _lod$current.update(state.camera);\n  });\n  return /*#__PURE__*/React.createElement(\"lOD\", _extends({\n    ref: mergeRefs([lod, ref])\n  }, props), children);\n});\n\nconst PositionalAudio = forwardRef((_ref, ref) => {\n  let {\n    url,\n    distance = 1,\n    loop = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"url\", \"distance\", \"loop\"]);\n\n  const sound = useRef();\n  const {\n    camera\n  } = useThree();\n  const [listener] = useState(() => new AudioListener());\n  const buffer = useLoader(AudioLoader, url);\n  useEffect(() => {\n    var _sound$current, _sound$current2, _sound$current3, _sound$current4;\n\n    (_sound$current = sound.current) == null ? void 0 : _sound$current.setBuffer(buffer);\n    (_sound$current2 = sound.current) == null ? void 0 : _sound$current2.setRefDistance(distance);\n    (_sound$current3 = sound.current) == null ? void 0 : _sound$current3.setLoop(loop);\n    (_sound$current4 = sound.current) == null ? void 0 : _sound$current4.play();\n    camera.add(listener);\n    return () => void camera.remove(listener);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"positionalAudio\", _extends({\n    ref: mergeRefs([sound, ref]),\n    args: [listener]\n  }, props));\n});\n\nconst PerspectiveCamera = forwardRef((_ref, ref) => {\n  let {\n    children,\n    makeDefault = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => {\n    cam.aspect = size.width / size.height;\n    cam.updateProjectionMatrix();\n  }, [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"perspectiveCamera\", _extends({\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nconst OrthographicCamera = forwardRef((_ref, ref) => {\n  let {\n    children,\n    makeDefault = true\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"makeDefault\"]);\n\n  const {\n    setDefaultCamera,\n    camera,\n    size\n  } = useThree();\n  const cameraRef = useUpdate(cam => cam.updateProjectionMatrix(), [size, props]);\n  useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera;\n      setDefaultCamera(cameraRef.current);\n      return () => setDefaultCamera(oldCam);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), children);\n});\n\nfunction StandardEffects({\n  smaa = true,\n  ao = true,\n  bloom = true,\n  edgeDetection = 0.1,\n  bloomOpacity = 1,\n  effects\n}) {\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const smaaProps = useLoader(SMAAImageLoader, '');\n  const composer = useMemo(() => {\n    const composer = new EffectComposer(gl, {\n      frameBufferType: HalfFloatType\n    });\n    composer.addPass(new RenderPass(scene, camera));\n    const smaaEffect = new SMAAEffect(...smaaProps);\n    smaaEffect.colorEdgesMaterial.setEdgeDetectionThreshold(edgeDetection);\n    const normalPass = new NormalPass(scene, camera);\n    const ssaoEffect = new SSAOEffect(camera, normalPass.renderTarget.texture, _extends({\n      blendFunction: BlendFunction.MULTIPLY,\n      samples: 21,\n      // May get away with less samples\n      rings: 4,\n      // Just make sure this isn't a multiple of samples\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.015,\n      // Controls sensitivity based on camera view distance **\n      rangeFalloff: 0.002,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      // Spread range\n      scale: 1.0,\n      // Controls intensity **\n      bias: 0.05\n    }, ao));\n    const bloomEffect = new BloomEffect(_extends({\n      opacity: 1,\n      blendFunction: BlendFunction.SCREEN,\n      kernelSize: KernelSize.VERY_LARGE,\n      luminanceThreshold: 0.9,\n      luminanceSmoothing: 0.07,\n      height: 600\n    }, bloom));\n    bloomEffect.blendMode.opacity.value = bloomOpacity;\n    let effectsArray = [];\n    if (effects) effectsArray = effects([smaaEffect, ssaoEffect, bloomEffect]);else {\n      if (smaa) effectsArray.push(smaaEffect);\n      if (ao) effectsArray.push(ssaoEffect);\n      if (bloom) effectsArray.push(bloomEffect);\n    }\n    const effectPass = new EffectPass(camera, ...effectsArray);\n    effectPass.renderToScreen = true;\n    composer.addPass(normalPass);\n    composer.addPass(effectPass);\n    return composer;\n  }, [camera, gl, scene, smaa, ao, bloom, edgeDetection, bloomOpacity]);\n  useEffect(() => void composer.setSize(size.width, size.height), [composer, size]);\n  return useFrame((_, delta) => composer.render(delta), 1);\n}\n\nextend({\n  TextMeshImpl: TextMesh\n});\nconst Text = forwardRef((_ref, ref) => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  return /*#__PURE__*/React.createElement(\"textMeshImpl\", _extends({\n    ref: ref,\n    text: children\n  }, props));\n});\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction calculatePosition(el, camera, size) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = camera.fov * Math.PI / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n\n  if (camera instanceof OrthographicCamera$1) return camera.zoom;\n  return 1;\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera$1 || camera instanceof OrthographicCamera$1) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nconst HTML = React.forwardRef((_ref, ref) => {\n  var _portal$current;\n\n  let {\n    children,\n    eps = 0.001,\n    style,\n    className,\n    prepend,\n    center,\n    fullscreen,\n    portal,\n    scaleFactor,\n    zIndexRange = [16777271, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"eps\", \"style\", \"className\", \"prepend\", \"center\", \"fullscreen\", \"portal\", \"scaleFactor\", \"zIndexRange\"]);\n\n  const {\n    gl,\n    scene,\n    camera,\n    size\n  } = useThree();\n  const [el] = useState(() => document.createElement('div'));\n  const group = useRef(null);\n  const old = useRef([0, 0]);\n  const target = (_portal$current = portal == null ? void 0 : portal.current) != null ? _portal$current : gl.domElement.parentNode;\n  useEffect(() => {\n    if (group.current) {\n      scene.updateMatrixWorld();\n      const vec = calculatePosition(group.current, camera, size);\n      el.style.cssText = \"position:absolute;top:0;left:0;transform:translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0);transform-origin:0 0;\";\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return () => {\n        if (target) target.removeChild(el);\n        ReactDOM.unmountComponentAtNode(el);\n      };\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [target]);\n  const styles = useMemo(() => _extends({\n    position: 'absolute',\n    transform: center ? 'translate3d(-50%,-50%,0)' : 'none'\n  }, fullscreen && {\n    top: -size.height / 2,\n    left: -size.width / 2,\n    width: size.width,\n    height: size.height\n  }, {}, style), [style, center, fullscreen, size]);\n  useEffect(() => void ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    style: styles,\n    className: className,\n    children: children\n  }), el));\n  useFrame(() => {\n    if (group.current) {\n      const vec = calculatePosition(group.current, camera, size);\n\n      if (Math.abs(old.current[0] - vec[0]) > eps || Math.abs(old.current[1] - vec[1]) > eps) {\n        el.style.display = !isObjectBehindCamera(group.current, camera) ? 'block' : 'none';\n        const scale = scaleFactor === undefined ? 1 : objectScale(group.current, camera) * scaleFactor;\n        el.style.transform = \"translate3d(\" + vec[0] + \"px,\" + vec[1] + \"px,0) scale(\" + scale + \")\";\n        el.style.zIndex = \"\" + objectZIndex(group.current, camera, zIndexRange);\n      }\n\n      old.current = vec;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\n\nconst Shadow = forwardRef((_ref, ref) => {\n  let {\n    fog = false,\n    colorStop = 0.0,\n    color = 'black',\n    opacity = 0.5\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"fog\", \"colorStop\", \"color\", \"opacity\"]);\n\n  const canvas = useMemo(() => {\n    let canvas = document.createElement('canvas');\n    canvas.width = 128;\n    canvas.height = 128;\n    let context = canvas.getContext('2d');\n    let gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);\n    gradient.addColorStop(colorStop, new Color(color).getStyle());\n    gradient.addColorStop(1, 'rgba(0,0,0,0)');\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    return canvas;\n  }, [color, stop]);\n  return /*#__PURE__*/React.createElement(\"mesh\", _extends({\n    ref: ref\n  }, props), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1]\n  }), /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    attach: \"material\",\n    transparent: true,\n    opacity: opacity,\n    fog: fog\n  }, /*#__PURE__*/React.createElement(\"canvasTexture\", {\n    attach: \"map\",\n    args: [canvas]\n  })));\n});\n\nfunction Stats({\n  showPanel = 0\n}) {\n  const [stats] = useState(() => new StatsImpl());\n  useEffect(() => {\n    stats.showPanel(showPanel);\n    document.body.appendChild(stats.dom);\n    return () => document.body.removeChild(stats.dom);\n  }, []);\n  return useFrame(state => {\n    stats.begin();\n    state.gl.render(state.scene, state.camera);\n    stats.end();\n  }, 1);\n}\n\nextend({\n  SkyImpl: Sky$1\n});\nconst Sky = forwardRef((_ref, ref) => {\n  let {\n    distance = 450000,\n    sunPosition = [0, 1, 0]\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"distance\", \"sunPosition\"]);\n\n  const scale = useMemo(() => new Vector3().setScalar(distance), [distance]);\n  return /*#__PURE__*/React.createElement(\"skyImpl\", _extends({\n    ref: ref,\n    \"material-uniforms-sunPosition-value\": sunPosition,\n    scale: scale\n  }, props));\n});\n\nfunction draco(url = '/draco-gltf/') {\n  return loader => {\n    const dracoLoader = new DRACOLoader();\n    dracoLoader.setDecoderPath(url);\n    loader.setDRACOLoader(dracoLoader);\n  };\n}\n\nconst pcss = ({\n  frustrum = 3.75,\n  size = 0.005,\n  near = 9.5,\n  samples = 17,\n  rings = 11\n} = {}) => \"#define LIGHT_WORLD_SIZE \" + size + \"\\n#define LIGHT_FRUSTUM_WIDTH \" + frustrum + \"\\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\\n#define NEAR_PLANE \" + near + \"\\n\\n#define NUM_SAMPLES \" + samples + \"\\n#define NUM_RINGS \" + rings + \"\\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\\n#define PCF_NUM_SAMPLES NUM_SAMPLES\\n\\nvec2 poissonDisk[NUM_SAMPLES];\\n\\nvoid initPoissonSamples(const in vec2 randomSeed) {\\n\\tfloat ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\\n\\tfloat INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\\n\\tfloat angle = rand(randomSeed) * PI2;\\n\\tfloat radius = INV_NUM_SAMPLES;\\n\\tfloat radiusStep = radius;\\n\\tfor (int i = 0; i < NUM_SAMPLES; i++) {\\n\\t\\tpoissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\\n\\t\\tradius += radiusStep;\\n\\t\\tangle += ANGLE_STEP;\\n\\t}\\n}\\n\\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\\n\\treturn (zReceiver - zBlocker) / zBlocker;\\n}\\n\\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\\n\\tfloat searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\\n\\tfloat blockerDepthSum = 0.0;\\n\\tint numBlockers = 0;\\n\\tfor (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\\n\\t\\tfloat shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\\n\\t\\tif (shadowMapDepth < zReceiver) {\\n\\t\\t\\tblockerDepthSum += shadowMapDepth;\\n\\t\\t\\tnumBlockers++;\\n\\t\\t}\\n\\t}\\n\\tif (numBlockers == 0) return -1.0;\\n\\treturn blockerDepthSum / float(numBlockers);\\n}\\n\\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\\n\\tfloat sum = 0.0;\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\tfor (int i = 0; i < PCF_NUM_SAMPLES; i++) {\\n\\t\\tfloat depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\\n\\t\\tif (zReceiver <= depth) sum += 1.0;\\n\\t}\\n\\treturn sum / (2.0 * float(PCF_NUM_SAMPLES));\\n}\\n\\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\\n\\tvec2 uv = coords.xy;\\n\\tfloat zReceiver = coords.z; // Assumed to be eye-space z in this code\\n\\tinitPoissonSamples(uv);\\n\\tfloat avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\\n\\tif (avgBlockerDepth == -1.0) return 1.0;\\n\\tfloat penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\\n\\tfloat filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\\n\\treturn PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\\n}\";\n\nconst softShadows = props => {\n  let shader = ShaderChunk.shadowmap_pars_fragment;\n  shader = shader.replace('#ifdef USE_SHADOWMAP', '#ifdef USE_SHADOWMAP\\n' + pcss(_extends({}, props)));\n  shader = shader.replace('#if defined( SHADOWMAP_TYPE_PCF )', '\\nreturn PCSS(shadowMap, shadowCoord);\\n#if defined( SHADOWMAP_TYPE_PCF )');\n  ShaderChunk.shadowmap_pars_fragment = shader;\n};\n\nlet _inverseMatrix = new Matrix4();\n\nlet _ray = new Ray();\n\nlet _sphere = new Sphere();\n\nlet _vA = new Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  let geometry = this.geometry;\n  let material = this.material;\n  let matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.getInverse(matrixWorld);\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nfunction useCamera(camera, props) {\n  const {\n    mouse\n  } = useThree();\n  const [raycast] = useState(() => {\n    let raycaster = new Raycaster();\n    if (props) applyProps(raycaster, props, {});\n    return function (_, intersects) {\n      raycaster.setFromCamera(mouse, camera);\n      const rc = this.constructor.prototype.raycast.bind(this);\n      if (rc) rc(raycaster, intersects);\n    };\n  });\n  return raycast;\n}\n\nexport { Detailed, HTML, MapControls, OrbitControls, OrthographicCamera, PerspectiveCamera, PositionalAudio, Shadow, Sky, StandardEffects, Stats, Text, TrackballControls, TransformControls, draco, meshBounds, softShadows, useCamera };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}