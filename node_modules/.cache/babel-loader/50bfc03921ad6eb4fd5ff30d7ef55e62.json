{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _construct from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct\";\nimport _defineProperty from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toArray from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray\";\nimport _slicedToArray from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/Users/mac/Desktop/react-3js-word-sphere/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport * as THREE from 'three';\nimport { Layers, Color, Texture, sRGBEncoding, Vector2, Raycaster, Scene, OrthographicCamera, PerspectiveCamera, Clock, Vector3, PCFSoftShadowMap, ACESFilmicToneMapping, WebGLRenderer } from 'three';\nimport Reconciler from 'react-reconciler';\nimport { unstable_now, unstable_runWithPriority, unstable_IdlePriority } from 'scheduler';\nimport React__default, { createContext, useState, useRef, useMemo, useCallback, useLayoutEffect, useEffect, createElement, useContext as useContext$1 } from 'react';\nimport { TinyEmitter } from 'tiny-emitter';\nimport usePromise from 'react-promise-suspense';\nimport useMeasure from 'react-use-measure';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport mergeRefs from 'react-merge-refs';\nvar version = \"4.2.4\";\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nvar roots = new Map();\nvar emptyObject = {};\nvar is = {\n  obj: function obj(a) {\n    return a === Object(a) && !is.arr(a);\n  },\n  fun: function fun(a) {\n    return typeof a === 'function';\n  },\n  str: function str(a) {\n    return typeof a === 'string';\n  },\n  num: function num(a) {\n    return typeof a === 'number';\n  },\n  und: function und(a) {\n    return a === void 0;\n  },\n  arr: function arr(a) {\n    return Array.isArray(a);\n  },\n  equ: function equ(a, b) {\n    // Wrong type or one of the two undefined, doesn't match\n    if (typeof a !== typeof b || !!a !== !!b) return false; // Atomic, just compare a against b\n\n    if (is.str(a) || is.num(a) || is.obj(a)) return a === b; // Array, shallow compare first to see if it's a match\n\n    if (is.arr(a) && a == b) return true; // Last resort, go through keys\n\n    var i;\n    for (i in a) {\n      if (!(i in b)) return false;\n    }\n    for (i in b) {\n      if (a[i] !== b[i]) return false;\n    }\n    return is.und(i) ? a === b : true;\n  }\n};\nfunction createSubs(callback, subs) {\n  var index = subs.length;\n  subs.push(callback);\n  return function () {\n    return void subs.splice(index, 1);\n  };\n}\nvar globalEffects = [];\nvar globalTailEffects = [];\nvar addEffect = function addEffect(callback) {\n  return createSubs(callback, globalEffects);\n};\nvar addTail = function addTail(callback) {\n  return createSubs(callback, globalTailEffects);\n};\nfunction renderGl(state, timestamp) {\n  var repeat = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var runGlobalEffects = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  // Run global effects\n  if (runGlobalEffects) globalEffects.forEach(function (effect) {\n    return effect(timestamp) && repeat++;\n  }); // Run local effects\n\n  var delta = state.current.clock.getDelta();\n  state.current.subscribers.forEach(function (sub) {\n    return sub.ref.current(state.current, delta);\n  }); // Decrease frame count\n\n  state.current.frames = Math.max(0, state.current.frames - 1);\n  repeat += !state.current.invalidateFrameloop ? 1 : state.current.frames; // Render content\n\n  if (!state.current.manual) state.current.gl.render(state.current.scene, state.current.camera);\n  return repeat;\n}\nvar running = false;\nfunction renderLoop(timestamp) {\n  running = true;\n  var repeat = 0; // Run global effects\n\n  globalEffects.forEach(function (effect) {\n    return effect(timestamp) && repeat++;\n  });\n  roots.forEach(function (root) {\n    var state = root.containerInfo.__state; // If the frameloop is invalidated, do not run another frame\n\n    if (state.current.active && state.current.ready && (!state.current.invalidateFrameloop || state.current.frames > 0)) repeat = renderGl(state, timestamp, repeat);\n  });\n  if (repeat !== 0) return requestAnimationFrame(renderLoop);else {\n    // Tail call effects, they are called when rendering stops\n    globalTailEffects.forEach(function (effect) {\n      return effect(timestamp);\n    });\n  } // Flag end of operation\n\n  running = false;\n}\nfunction _invalidate() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  var frames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  if (state === true) roots.forEach(function (root) {\n    return root.containerInfo.__state.current.frames = frames;\n  });else if (state && state.current) {\n    if (state.current.vr) return;\n    state.current.frames = frames;\n  }\n  if (!running) {\n    running = true;\n    requestAnimationFrame(renderLoop);\n  }\n}\nvar catalogue = {};\nvar extend = function extend(objects) {\n  return void (catalogue = _extends({}, catalogue, {}, objects));\n};\nfunction applyProps(instance, newProps) {\n  var oldProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var accumulative = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  // Filter equals, events and reserved props\n  var container = instance.__container;\n  var sameProps = Object.keys(newProps).filter(function (key) {\n    return is.equ(newProps[key], oldProps[key]);\n  });\n  var handlers = Object.keys(newProps).filter(function (key) {\n    // Event-handlers ...\n    //   are functions, that\n    //   start with \"on\", and\n    //   contain the name \"pointer\", or \"wheel\", or \"click\"\n    if (is.fun(newProps[key]) && key.startsWith('on')) {\n      return key.includes('Pointer') || key.includes('Click') || key.includes('Wheel');\n    }\n  });\n  var leftOvers = accumulative ? Object.keys(oldProps).filter(function (key) {\n    return newProps[key] === void 0;\n  }) : [];\n  var filteredProps = [].concat(_toConsumableArray(sameProps), ['children', 'key', 'ref']).reduce(function (acc, prop) {\n    var rest = _objectWithoutPropertiesLoose(acc, [prop].map(_toPropertyKey));\n    return rest;\n  }, newProps); // Add left-overs as undefined props so they can be removed\n\n  leftOvers.forEach(function (key) {\n    return key !== 'children' && (filteredProps[key] = undefined);\n  });\n  if (Object.keys(filteredProps).length > 0) {\n    Object.entries(filteredProps).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n      if (!handlers.includes(key)) {\n        var _instance$__container;\n        var root = instance;\n        var target = root[key];\n        if (key.includes('-')) {\n          var entries = key.split('-');\n          target = entries.reduce(function (acc, key) {\n            return acc[key];\n          }, instance); // If the target is atomic, it forces us to switch the root\n\n          if (!(target && target.set)) {\n            var _entries$reverse = entries.reverse(),\n              _entries$reverse2 = _toArray(_entries$reverse),\n              name = _entries$reverse2[0],\n              reverseEntries = _entries$reverse2.slice(1);\n            root = reverseEntries.reverse().reduce(function (acc, key) {\n              return acc[key];\n            }, instance);\n            key = name;\n          }\n        } // Special treatment for objects with support for set/copy\n\n        var isColorManagement = (_instance$__container = instance.__container) == null ? void 0 : _instance$__container.__state.current.colorManagement;\n        if (target && target.set && (target.copy || target instanceof Layers)) {\n          var _target;\n          // If value is an array it has got to be the set function\n          if (Array.isArray(value)) (_target = target).set.apply(_target, _toConsumableArray(value)); // Test again target.copy(class) next ...\n          else if (target.copy && value && value.constructor && target.constructor.name === value.constructor.name) target.copy(value); // If nothing else fits, just set the single value, ignore undefined\n          // https://github.com/react-spring/react-three-fiber/issues/274\n          else if (value !== undefined) {\n            target.set(value); // Auto-convert sRGB colors, for now ...\n            // https://github.com/react-spring/react-three-fiber/issues/344\n\n            if (isColorManagement && target instanceof Color) {\n              target.convertSRGBToLinear();\n            }\n          } // Else, just overwrite the value\n        } else {\n          root[key] = value; // Auto-convert sRGB textures, for now ...\n          // https://github.com/react-spring/react-three-fiber/issues/344\n\n          if (isColorManagement && root[key] instanceof Texture) {\n            root[key].encoding = sRGBEncoding;\n          }\n        }\n        invalidateInstance(instance);\n      }\n    }); // Preemptively delete the instance from the containers interaction\n\n    if (accumulative && container && instance.raycast && instance.__handlers) {\n      instance.__handlers = undefined;\n      var index = container.__interaction.indexOf(instance);\n      if (index > -1) container.__interaction.splice(index, 1);\n    } // Prep interaction handlers\n\n    if (handlers.length) {\n      // Add interactive object to central container\n      if (container && instance.raycast) container.__interaction.push(instance); // Add handlers to the instances handler-map\n\n      instance.__handlers = handlers.reduce(function (acc, key) {\n        return _extends({}, acc, _defineProperty({}, key.charAt(2).toLowerCase() + key.substr(3), newProps[key]));\n      }, {});\n    } // Call the update lifecycle when it is being updated, but only when it is part of the scene\n\n    if (instance.parent) updateInstance(instance);\n  }\n}\nfunction invalidateInstance(instance) {\n  if (instance.__container && instance.__container.__state) _invalidate(instance.__container.__state);\n}\nfunction updateInstance(instance) {\n  if (instance.onUpdate) instance.onUpdate(instance);\n}\nfunction createInstance(type, _ref, container, hostContext, internalInstanceHandle) {\n  var _ref$args = _ref.args,\n    args = _ref$args === void 0 ? [] : _ref$args,\n    props = _objectWithoutPropertiesLoose(_ref, [\"args\"]);\n  var name = \"\" + type[0].toUpperCase() + type.slice(1);\n  var instance;\n  if (type === 'primitive') {\n    instance = props.object;\n    instance.__instance = true;\n  } else if (type === 'new') {\n    instance = new props.object(args);\n  } else {\n    var target = catalogue[name] || THREE[name];\n    if (!target) {\n      throw \"\\\"\" + name + \"\\\" is not part of the THREE namespace! Did you forget to extend it? See: https://github.com/react-spring/react-three-fiber#using-3rd-party-non-three-namespaced-objects-in-the-scene-graph\";\n    }\n    instance = is.arr(args) ? _construct(target, _toConsumableArray(args)) : new target(args);\n  } // Bind to the root container in case portals are being used\n  // This is perhaps better for event management as we can keep them on a single instance\n\n  while (container.__container) {\n    container = container.__container;\n  } // TODO: https://github.com/facebook/react/issues/17147\n  // If it's still not there it means the portal was created on a virtual node outside of react\n\n  if (!roots.has(container)) {\n    var fn = function fn(node) {\n      if (!node.return) return node.stateNode && node.stateNode.containerInfo;else return fn(node.return);\n    };\n    container = fn(internalInstanceHandle);\n  } // Apply initial props\n\n  instance.__objects = [];\n  instance.__container = container; // It should NOT call onUpdate on object instanciation, because it hasn't been added to the\n  // view yet. If the callback relies on references for instance, they won't be ready yet, this is\n  // why it passes \"false\" here\n\n  applyProps(instance, props, {});\n  return instance;\n}\nfunction appendChild(parentInstance, child) {\n  if (child) {\n    if (child.isObject3D) parentInstance.add(child);else {\n      parentInstance.__objects.push(child);\n      child.parent = parentInstance; // The attach attribute implies that the object attaches itself on the parent\n\n      if (child.attach) parentInstance[child.attach] = child;else if (child.attachArray) {\n        if (!is.arr(parentInstance[child.attachArray])) parentInstance[child.attachArray] = [];\n        parentInstance[child.attachArray].push(child);\n      } else if (child.attachObject) {\n        if (!is.obj(parentInstance[child.attachObject[0]])) parentInstance[child.attachObject[0]] = {};\n        parentInstance[child.attachObject[0]][child.attachObject[1]] = child;\n      }\n    }\n    updateInstance(child);\n    invalidateInstance(child);\n  }\n}\nfunction insertBefore(parentInstance, child, beforeChild) {\n  if (child) {\n    if (child.isObject3D) {\n      child.parent = parentInstance;\n      child.dispatchEvent({\n        type: 'added'\n      });\n      var restSiblings = parentInstance.children.filter(function (sibling) {\n        return sibling !== child;\n      }); // TODO: the order is out of whack if data objects are present, has to be recalculated\n\n      var index = restSiblings.indexOf(beforeChild);\n      parentInstance.children = [].concat(_toConsumableArray(restSiblings.slice(0, index)), [child], _toConsumableArray(restSiblings.slice(index)));\n      updateInstance(child);\n    } else appendChild(parentInstance, child); // TODO: order!!!\n\n    invalidateInstance(child);\n  }\n}\nfunction removeRecursive(array, parent) {\n  var clone = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  if (array) {\n    // Three uses splice op's internally we may have to shallow-clone the array in order to safely remove items\n    var target = clone ? _toConsumableArray(array) : array;\n    target.forEach(function (child) {\n      return removeChild(parent, child);\n    });\n  }\n}\nfunction removeChild(parentInstance, child) {\n  if (child) {\n    if (child.isObject3D) {\n      parentInstance.remove(child);\n    } else {\n      child.parent = null;\n      parentInstance.__objects = parentInstance.__objects.filter(function (x) {\n        return x !== child;\n      }); // Remove attachment\n\n      if (child.attach) parentInstance[child.attach] = null;else if (child.attachArray) parentInstance[child.attachArray] = parentInstance[child.attachArray].filter(function (x) {\n        return x !== child;\n      });else if (child.attachObject) {\n        delete parentInstance[child.attachObject[0]][child.attachObject[1]];\n      }\n    }\n    invalidateInstance(child); // Allow objects to bail out of recursive dispose alltogether by passing dispose={null}\n\n    if (child.dispose !== null) {\n      unstable_runWithPriority(unstable_IdlePriority, function () {\n        // Remove interactivity\n        if (child.__container) child.__container.__interaction = child.__container.__interaction.filter(function (x) {\n          return x !== child;\n        }); // Remove nested child objects\n\n        removeRecursive(child.__objects, child);\n        removeRecursive(child.children, child, true); // Dispose item\n\n        if (child.dispose) child.dispose(); // Remove references\n\n        delete child.__container;\n        delete child.__objects;\n      });\n    }\n  }\n}\nfunction switchInstance(instance, type, newProps, fiber) {\n  var parent = instance.parent;\n  var newInstance = createInstance(type, newProps, instance.__container, null, fiber);\n  removeChild(parent, instance);\n  appendChild(parent, newInstance) // This evil hack switches the react-internal fiber node\n  // https://github.com/facebook/react/issues/14983\n  // https://github.com/facebook/react/pull/15021\n  ;\n\n  [fiber, fiber.alternate].forEach(function (fiber) {\n    if (fiber !== null) {\n      fiber.stateNode = newInstance;\n      if (fiber.ref) {\n        if (is.fun(fiber.ref)) fiber.ref(newInstance);else fiber.ref.current = newInstance;\n      }\n    }\n  });\n}\nvar Renderer = Reconciler({\n  now: unstable_now,\n  createInstance: createInstance,\n  removeChild: removeChild,\n  appendChild: appendChild,\n  insertBefore: insertBefore,\n  // @ts-ignore\n  warnsIfNotActing: true,\n  supportsMutation: true,\n  isPrimaryRenderer: false,\n  scheduleTimeout: is.fun(setTimeout) ? setTimeout : undefined,\n  cancelTimeout: is.fun(clearTimeout) ? clearTimeout : undefined,\n  // @ts-ignore\n  setTimeout: is.fun(setTimeout) ? setTimeout : undefined,\n  // @ts-ignore\n  clearTimeout: is.fun(clearTimeout) ? clearTimeout : undefined,\n  noTimeout: -1,\n  appendInitialChild: appendChild,\n  appendChildToContainer: appendChild,\n  removeChildFromContainer: removeChild,\n  insertInContainerBefore: insertBefore,\n  commitUpdate: function commitUpdate(instance, updatePayload, type, oldProps, newProps, fiber) {\n    if (instance.__instance && newProps.object && newProps.object !== instance) {\n      // <instance object={...} /> where the object reference has changed\n      switchInstance(instance, type, newProps, fiber);\n    } else {\n      // This is a data object, let's extract critical information about it\n      var _newProps$args = newProps.args,\n        argsNew = _newProps$args === void 0 ? [] : _newProps$args,\n        restNew = _objectWithoutPropertiesLoose(newProps, [\"args\"]);\n      var _oldProps$args = oldProps.args,\n        argsOld = _oldProps$args === void 0 ? [] : _oldProps$args,\n        restOld = _objectWithoutPropertiesLoose(oldProps, [\"args\"]); // If it has new props or arguments, then it needs to be re-instanciated\n\n      var hasNewArgs = argsNew.some(function (value, index) {\n        return is.obj(value) ? Object.entries(value).some(function (_ref5) {\n          var _ref6 = _slicedToArray(_ref5, 2),\n            key = _ref6[0],\n            val = _ref6[1];\n          return val !== argsOld[index][key];\n        }) : value !== argsOld[index];\n      });\n      if (hasNewArgs) {\n        // Next we create a new instance and append it again\n        switchInstance(instance, type, newProps, fiber);\n      } else {\n        // Otherwise just overwrite props\n        applyProps(instance, restNew, restOld, true);\n      }\n    }\n  },\n  hideInstance: function hideInstance(instance) {\n    if (instance.isObject3D) {\n      instance.visible = false;\n      invalidateInstance(instance);\n    }\n  },\n  unhideInstance: function unhideInstance(instance, props) {\n    if (instance.isObject3D && props.visible == null || props.visible) {\n      instance.visible = true;\n      invalidateInstance(instance);\n    }\n  },\n  hideTextInstance: function hideTextInstance() {\n    throw new Error('Text is not allowed in the react-three-fibre tree. You may have extraneous whitespace between components.');\n  },\n  getPublicInstance: function getPublicInstance(instance) {\n    return instance;\n  },\n  getRootHostContext: function getRootHostContext() {\n    return emptyObject;\n  },\n  getChildHostContext: function getChildHostContext() {\n    return emptyObject;\n  },\n  createTextInstance: function createTextInstance() {},\n  finalizeInitialChildren: function finalizeInitialChildren() {\n    return false;\n  },\n  prepareUpdate: function prepareUpdate() {\n    return emptyObject;\n  },\n  shouldDeprioritizeSubtree: function shouldDeprioritizeSubtree() {\n    return false;\n  },\n  prepareForCommit: function prepareForCommit() {},\n  resetAfterCommit: function resetAfterCommit() {},\n  shouldSetTextContent: function shouldSetTextContent() {\n    return false;\n  }\n});\nvar LegacyRoot = 0;\nvar ConcurrentRoot = 2;\nvar hasSymbol = is.fun(Symbol) && Symbol.for;\nvar REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nfunction render(element, container, state) {\n  var root = roots.get(container);\n  if (!root) {\n    container.__state = state;\n    var newRoot = root = Renderer.createContainer(container, state !== undefined && state.current.concurrent ? ConcurrentRoot : LegacyRoot, false);\n    roots.set(container, newRoot);\n  }\n  Renderer.updateContainer(element, root, null, function () {\n    return undefined;\n  });\n  return Renderer.getPublicRootInstance(root);\n}\nfunction unmountComponentAtNode(container) {\n  var root = roots.get(container);\n  if (root) Renderer.updateContainer(null, root, null, function () {\n    return void roots.delete(container);\n  });\n}\nfunction createPortal(children, containerInfo, implementation) {\n  var key = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  if (!containerInfo.__objects) containerInfo.__objects = [];\n  return {\n    $$typeof: REACT_PORTAL_TYPE,\n    key: key == null ? null : '' + key,\n    children: children,\n    containerInfo: containerInfo,\n    implementation: implementation\n  };\n}\nRenderer.injectIntoDevTools({\n  bundleType: process.env.NODE_ENV === 'production' ? 0 : 1,\n  version: version,\n  rendererPackageName: 'react-three-fiber',\n  findHostInstanceByFiber: Renderer.findHostInstance\n});\nfunction isOrthographicCamera(def) {\n  return def.isOrthographicCamera;\n}\nfunction makeId(event) {\n  return (event.eventObject || event.object).uuid + '/' + event.index;\n}\nvar stateContext = createContext({});\nvar useCanvas = function useCanvas(props) {\n  var children = props.children,\n    gl = props.gl,\n    camera = props.camera,\n    orthographic = props.orthographic,\n    raycaster = props.raycaster,\n    size = props.size,\n    pixelRatio = props.pixelRatio,\n    _props$vr = props.vr,\n    vr = _props$vr === void 0 ? false : _props$vr,\n    _props$concurrent = props.concurrent,\n    concurrent = _props$concurrent === void 0 ? false : _props$concurrent,\n    _props$shadowMap = props.shadowMap,\n    shadowMap = _props$shadowMap === void 0 ? false : _props$shadowMap,\n    _props$sRGB = props.sRGB,\n    sRGB = _props$sRGB === void 0 ? false : _props$sRGB,\n    _props$colorManagemen = props.colorManagement,\n    colorManagement = _props$colorManagemen === void 0 ? false : _props$colorManagemen,\n    _props$invalidateFram = props.invalidateFrameloop,\n    invalidateFrameloop = _props$invalidateFram === void 0 ? false : _props$invalidateFram,\n    _props$updateDefaultC = props.updateDefaultCamera,\n    updateDefaultCamera = _props$updateDefaultC === void 0 ? true : _props$updateDefaultC,\n    _props$noEvents = props.noEvents,\n    noEvents = _props$noEvents === void 0 ? false : _props$noEvents,\n    onCreated = props.onCreated,\n    onPointerMissed = props.onPointerMissed; // Local, reactive state\n\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    ready = _useState2[0],\n    setReady = _useState2[1];\n  var _useState3 = useState(function () {\n      return new Vector2();\n    }),\n    _useState4 = _slicedToArray(_useState3, 1),\n    mouse = _useState4[0];\n  var _useState5 = useState(function () {\n      var ray = new Raycaster();\n      if (raycaster) {\n        var raycasterProps = _objectWithoutPropertiesLoose(raycaster, [\"filter\"]);\n        applyProps(ray, raycasterProps, {});\n      }\n      return ray;\n    }),\n    _useState6 = _slicedToArray(_useState5, 1),\n    defaultRaycaster = _useState6[0];\n  var _useState7 = useState(function () {\n      var scene = new Scene();\n      scene.__interaction = [];\n      scene.__objects = [];\n      return scene;\n    }),\n    _useState8 = _slicedToArray(_useState7, 1),\n    defaultScene = _useState8[0];\n  var _useState9 = useState(function () {\n      var cam = orthographic ? new OrthographicCamera(0, 0, 0, 0, 0.1, 1000) : new PerspectiveCamera(75, 0, 0.1, 1000);\n      cam.position.z = 5;\n      if (camera) applyProps(cam, camera, {}); // Always look at [0, 0, 0]\n\n      cam.lookAt(0, 0, 0);\n      return cam;\n    }),\n    _useState10 = _slicedToArray(_useState9, 2),\n    defaultCam = _useState10[0],\n    _setDefaultCamera = _useState10[1];\n  var _useState11 = useState(function () {\n      return new Clock();\n    }),\n    _useState12 = _slicedToArray(_useState11, 1),\n    clock = _useState12[0]; // Public state\n\n  var state = useRef({\n    ready: false,\n    active: true,\n    manual: 0,\n    colorManagement: colorManagement,\n    sRGB: sRGB,\n    vr: vr,\n    concurrent: concurrent,\n    noEvents: noEvents,\n    invalidateFrameloop: false,\n    frames: 0,\n    aspect: 0,\n    subscribers: [],\n    camera: defaultCam,\n    scene: defaultScene,\n    raycaster: defaultRaycaster,\n    mouse: mouse,\n    clock: clock,\n    gl: gl,\n    size: size,\n    viewport: {\n      width: 0,\n      height: 0,\n      factor: 0\n    },\n    initialClick: [0, 0],\n    initialHits: [],\n    pointer: new TinyEmitter(),\n    captured: undefined,\n    events: undefined,\n    subscribe: function subscribe(ref) {\n      var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      // If this subscription was given a priority, it takes rendering into its own hands\n      // For that reason we switch off automatic rendering and increase the manual flag\n      // As long as this flag is positive (there could be multiple render subscription)\n      // ..there can be no internal rendering at all\n      if (priority) state.current.manual++;\n      state.current.subscribers.push({\n        ref: ref,\n        priority: priority\n      }); // Sort layers from lowest to highest, meaning, highest priority renders last (on top of the other frames)\n\n      state.current.subscribers = state.current.subscribers.sort(function (a, b) {\n        return a.priority - b.priority;\n      });\n      return function () {\n        // Decrease manual flag if this subscription had a priority\n        if (priority) state.current.manual--;\n        state.current.subscribers = state.current.subscribers.filter(function (s) {\n          return s.ref !== ref;\n        });\n      };\n    },\n    setDefaultCamera: function setDefaultCamera(camera) {\n      return _setDefaultCamera(camera);\n    },\n    invalidate: function invalidate() {\n      return _invalidate(state);\n    },\n    intersect: function intersect() {\n      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var prepare = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      return handlePointerMove(event, prepare);\n    }\n  }); // Writes locals into public state for distribution among subscribers, context, etc\n\n  useMemo(function () {\n    state.current.ready = ready;\n    state.current.size = size;\n    state.current.camera = defaultCam;\n    state.current.invalidateFrameloop = invalidateFrameloop;\n    state.current.vr = vr;\n    state.current.gl = gl;\n    state.current.concurrent = concurrent;\n    state.current.noEvents = noEvents;\n  }, [invalidateFrameloop, vr, concurrent, noEvents, ready, size, defaultCam, gl]); // Adjusts default camera\n\n  useMemo(function () {\n    state.current.aspect = size.width / size.height;\n    if (isOrthographicCamera(defaultCam)) {\n      state.current.viewport = {\n        width: size.width,\n        height: size.height,\n        factor: 1\n      };\n    } else {\n      var target = new Vector3(0, 0, 0);\n      var distance = defaultCam.position.distanceTo(target);\n      var fov = defaultCam.fov * Math.PI / 180; // convert vertical fov to radians\n\n      var height = 2 * Math.tan(fov / 2) * distance; // visible height\n\n      var width = height * state.current.aspect;\n      state.current.viewport = {\n        width: width,\n        height: height,\n        factor: size.width / width\n      };\n    } // #92 (https://github.com/drcmda/react-three-fiber/issues/92)\n    // Sometimes automatic default camera adjustment isn't wanted behaviour\n\n    if (updateDefaultCamera) {\n      if (isOrthographicCamera(defaultCam)) {\n        defaultCam.left = size.width / -2;\n        defaultCam.right = size.width / 2;\n        defaultCam.top = size.height / 2;\n        defaultCam.bottom = size.height / -2;\n      } else {\n        defaultCam.aspect = state.current.aspect;\n      }\n      defaultCam.updateProjectionMatrix(); // #178: https://github.com/react-spring/react-three-fiber/issues/178\n      // Update matrix world since the renderer is a frame late\n\n      defaultCam.updateMatrixWorld();\n    }\n    gl.setSize(size.width, size.height);\n    if (ready) _invalidate(state);\n  }, [defaultCam, size, updateDefaultCamera]);\n  /** Events ------------------------------------------------------------------------------------------------ */\n\n  /** Sets up defaultRaycaster */\n\n  var prepareRay = useCallback(function (_ref7) {\n    var clientX = _ref7.clientX,\n      clientY = _ref7.clientY;\n    if (clientX !== void 0) {\n      var _state$current$size = state.current.size,\n        left = _state$current$size.left,\n        right = _state$current$size.right,\n        top = _state$current$size.top,\n        bottom = _state$current$size.bottom;\n      mouse.set((clientX - left) / (right - left) * 2 - 1, -((clientY - top) / (bottom - top)) * 2 + 1);\n      defaultRaycaster.setFromCamera(mouse, state.current.camera);\n    }\n  }, []);\n  /** Intersects interaction objects using the event input */\n\n  var intersect = useCallback(function (event, filter) {\n    // Skip event handling when noEvents is set\n    if (state.current.noEvents) return [];\n    var seen = new Set();\n    var hits = []; // Allow callers to eliminate event objects\n\n    var eventsObjects = filter ? filter(state.current.scene.__interaction) : state.current.scene.__interaction; // Intersect known handler objects and filter against duplicates\n\n    var intersects = defaultRaycaster.intersectObjects(eventsObjects, true).filter(function (item) {\n      var id = makeId(item);\n      if (seen.has(id)) return false;\n      seen.add(id);\n      return true;\n    }); // #16031: (https://github.com/mrdoob/three.js/issues/16031)\n    // Allow custom userland intersect sort order\n\n    if (raycaster && raycaster.filter && sharedState.current) intersects = raycaster.filter(intersects, sharedState.current);\n    var _iterator = _createForOfIteratorHelper(intersects),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _intersect = _step.value;\n        var eventObject = _intersect.object; // Bubble event up\n\n        while (eventObject) {\n          var handlers = eventObject.__handlers;\n          if (handlers) hits.push(_extends({}, _intersect, {\n            eventObject: eventObject\n          }));\n          eventObject = eventObject.parent;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return hits;\n  }, []);\n  /**  Calculates click deltas */\n\n  var calculateDistance = useCallback(function (event) {\n    var dx = event.clientX - state.current.initialClick[0];\n    var dy = event.clientY - state.current.initialClick[1];\n    return Math.round(Math.sqrt(dx * dx + dy * dy));\n  }, []);\n  var hovered = useMemo(function () {\n    return new Map();\n  }, []);\n  /**  Handles intersections by forwarding them to handlers */\n\n  var temp = new Vector3();\n  var handleIntersects = useCallback(function (event, fn, filter) {\n    // Get fresh intersects\n    var intersections = intersect(event, filter); // If the interaction is captured take that into account, the captured event has to be part of the intersects\n\n    if (state.current.captured && event.type !== 'click' && event.type !== 'wheel') {\n      state.current.captured.forEach(function (captured) {\n        if (!intersections.find(function (hit) {\n          return hit.eventObject === captured.eventObject;\n        })) intersections.push(captured);\n      });\n    } // If anything has been found, forward it to the event listeners\n\n    if (intersections.length) {\n      (function () {\n        var unprojectedPoint = temp.set(mouse.x, mouse.y, 0).unproject(state.current.camera);\n        var delta = event.type === 'click' ? calculateDistance(event) : 0;\n        var releasePointerCapture = function releasePointerCapture(id) {\n          return event.target.releasePointerCapture(id);\n        };\n        var localState = {\n          stopped: false,\n          captured: false\n        };\n        var _iterator2 = _createForOfIteratorHelper(intersections),\n          _step2;\n        try {\n          var _loop = function _loop() {\n            var hit = _step2.value;\n            var setPointerCapture = function setPointerCapture(id) {\n              // If the hit is going to be captured flag that we're in captured state\n              if (!localState.captured) {\n                localState.captured = true; // The captured hit array is reset to collect hits\n\n                state.current.captured = [];\n              } // Push hits to the array\n\n              if (state.current.captured) state.current.captured.push(hit) // Call the original event now\n              ;\n\n              event.target.setPointerCapture(id);\n            };\n            var raycastEvent = _extends({}, event, {}, hit, {\n              intersections: intersections,\n              stopped: localState.stopped,\n              delta: delta,\n              unprojectedPoint: unprojectedPoint,\n              ray: defaultRaycaster.ray,\n              camera: state.current.camera,\n              // Hijack stopPropagation, which just sets a flag\n              stopPropagation: function stopPropagation() {\n                return raycastEvent.stopped = localState.stopped = true;\n              },\n              // Pointer-capture needs the hit, on which the user may call stopPropagation()\n              // This makes it harder to use the actual event, because then we loose the connection\n              // to the actual hit, which would mean it's picking up all intersects ...\n              target: _extends({}, event.target, {\n                setPointerCapture: setPointerCapture,\n                releasePointerCapture: releasePointerCapture\n              }),\n              currentTarget: _extends({}, event.currentTarget, {\n                setPointerCapture: setPointerCapture,\n                releasePointerCapture: releasePointerCapture\n              }),\n              sourceEvent: event\n            });\n            fn(raycastEvent);\n            if (localState.stopped === true) {\n              // Propagation is stopped, remove all other hover records\n              // An event handler is only allowed to flush other handlers if it is hovered itself\n              if (hovered.size && Array.from(hovered.values()).find(function (i) {\n                return i.object === hit.object;\n              })) {\n                handlePointerCancel(raycastEvent, [hit]);\n              }\n              return \"break\";\n            }\n          };\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _ret = _loop();\n            if (_ret === \"break\") break;\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      })();\n    }\n    return intersections;\n  }, []);\n  var handlePointerMove = useCallback(function (event) {\n    var prepare = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    state.current.pointer.emit('pointerMove', event);\n    if (prepare) prepareRay(event);\n    var hits = handleIntersects(event, function (data) {\n      var eventObject = data.eventObject;\n      var handlers = eventObject.__handlers; // Check presence of handlers\n\n      if (!handlers) return; // Call mouse move\n\n      if (handlers.pointerMove) handlers.pointerMove(data); // Check if mouse enter or out is present\n\n      if (handlers.pointerOver || handlers.pointerEnter || handlers.pointerOut || handlers.pointerLeave) {\n        var id = makeId(data);\n        var hoveredItem = hovered.get(id);\n        if (!hoveredItem) {\n          // If the object wasn't previously hovered, book it and call its handler\n          hovered.set(id, data);\n          if (handlers.pointerOver) handlers.pointerOver(_extends({}, data, {\n            type: 'pointerover'\n          }));\n          if (handlers.pointerEnter) handlers.pointerEnter(_extends({}, data, {\n            type: 'pointerEnter'\n          }));\n        } else if (hoveredItem.stopped) {\n          // If the object was previously hovered and stopped, we shouldn't allow other items to proceed\n          data.stopPropagation();\n        }\n      }\n    },\n    // This is onPointerMove, we're only interested in events that exhibit this particular event\n    function (objects) {\n      return objects.filter(function (obj) {\n        return ['Move', 'Over', 'Enter', 'Out', 'Leave'].some(function (name) {\n          return obj.__handlers['pointer' + name];\n        });\n      });\n    }); // Take care of unhover\n\n    handlePointerCancel(event, hits, prepare);\n    return hits;\n  }, []);\n  var handlePointerCancel = useCallback(function (event, hits) {\n    var prepare = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    state.current.pointer.emit('pointerCancel', event);\n    if (prepare) prepareRay(event);\n    if (!hits) hits = handleIntersects(event, function () {\n      return null;\n    });\n    Array.from(hovered.values()).forEach(function (data) {\n      // When no objects were hit or the the hovered object wasn't found underneath the cursor\n      // we call onPointerOut and delete the object from the hovered-elements map\n      if (hits && (!hits.length || !hits.find(function (i) {\n        return i.eventObject === data.eventObject;\n      }))) {\n        var eventObject = data.eventObject;\n        var handlers = eventObject.__handlers;\n        if (handlers) {\n          if (handlers.pointerOut) handlers.pointerOut(_extends({}, data, {\n            type: 'pointerout'\n          }));\n          if (handlers.pointerLeave) handlers.pointerLeave(_extends({}, data, {\n            type: 'pointerleave'\n          }));\n        }\n        hovered.delete(makeId(data));\n      }\n    });\n  }, []);\n  var handlePointer = useCallback(function (name) {\n    return function (event) {\n      var prepare = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      state.current.pointer.emit(name, event);\n      if (prepare) prepareRay(event);\n      var hits = handleIntersects(event, function (data) {\n        var eventObject = data.eventObject;\n        var handlers = eventObject.__handlers;\n        if (handlers && handlers[name]) {\n          // Forward all events back to their respective handlers with the exception of click,\n          // which must must the initial target\n          if (name !== 'click' || state.current.initialHits.includes(eventObject)) handlers[name](data);\n        }\n      }); // If a click yields no results, pass it back to the user as a miss\n\n      if (name === 'pointerDown') {\n        state.current.initialClick = [event.clientX, event.clientY];\n        state.current.initialHits = hits.map(function (hit) {\n          return hit.eventObject;\n        });\n      }\n      if (name === 'click' && !hits.length && onPointerMissed) {\n        if (calculateDistance(event) <= 2) onPointerMissed();\n      }\n    };\n  }, [onPointerMissed]);\n  useMemo(function () {\n    state.current.events = {\n      onClick: handlePointer('click'),\n      onWheel: handlePointer('wheel'),\n      onPointerDown: handlePointer('pointerDown'),\n      onPointerUp: handlePointer('pointerUp'),\n      onPointerLeave: function onPointerLeave(e) {\n        return handlePointerCancel(e, []);\n      },\n      onPointerMove: handlePointerMove,\n      // onGotPointerCapture is not needed any longer because the behaviour is hacked into\n      // the event itself (see handleIntersects). But in order for non-web targets to simulate\n      // it we keep the legacy event, which simply flags all current intersects as captured\n      onGotPointerCaptureLegacy: function onGotPointerCaptureLegacy(e) {\n        return state.current.captured = intersect(e);\n      },\n      onLostPointerCapture: function onLostPointerCapture(e) {\n        return state.current.captured = undefined, handlePointerCancel(e);\n      }\n    };\n  }, [onPointerMissed]);\n  /** Events ------------------------------------------------------------------------------------------------- */\n  // Only trigger the context provider when necessary\n\n  var sharedState = useRef();\n  useMemo(function () {\n    var _state$current = state.current,\n      props = _objectWithoutPropertiesLoose(_state$current, [\"ready\", \"manual\", \"vr\", \"noEvents\", \"invalidateFrameloop\", \"frames\", \"subscribers\", \"captured\", \"initialClick\", \"initialHits\"]);\n    sharedState.current = props;\n  }, [size, defaultCam]); // Update pixel ratio\n\n  useLayoutEffect(function () {\n    return void (pixelRatio && gl.setPixelRatio(pixelRatio));\n  }, [pixelRatio]); // Update shadow map\n\n  useLayoutEffect(function () {\n    if (shadowMap) {\n      gl.shadowMap.enabled = true;\n      if (typeof shadowMap === 'object') Object.assign(gl, shadowMap);else gl.shadowMap.type = PCFSoftShadowMap;\n    }\n    if (sRGB || colorManagement) {\n      gl.toneMapping = ACESFilmicToneMapping;\n      gl.outputEncoding = sRGBEncoding;\n    }\n  }, [shadowMap, sRGB, colorManagement]); // This component is a bridge into the three render context, when it gets rendered\n  // we know we are ready to compile shaders, call subscribers, etc\n\n  var Canvas = useCallback(function Canvas(props) {\n    var activate = function activate() {\n      return setReady(true);\n    }; // eslint-disable-next-line react-hooks/rules-of-hooks\n\n    useEffect(function () {\n      var result = onCreated && onCreated(state.current);\n      return void (result && result.then ? result.then(activate) : activate());\n    }, []);\n    return props.children;\n  }, []); // Render v-dom into scene\n\n  useLayoutEffect(function () {\n    render( /*#__PURE__*/createElement(Canvas, null, /*#__PURE__*/createElement(stateContext.Provider, {\n      value: sharedState.current\n    }, typeof children === 'function' ? children(state.current) : children)), defaultScene, state);\n  }, [ready, children, sharedState.current]);\n  useLayoutEffect(function () {\n    if (ready) {\n      // Start render-loop, either via RAF or setAnimationLoop for VR\n      if (!state.current.vr) {\n        _invalidate(state);\n      } else if ((gl.xr || gl.vr) && gl.setAnimationLoop) {\n        (gl.xr || gl.vr).enabled = true;\n        gl.setAnimationLoop(function (t) {\n          return renderGl(state, t, 0, true);\n        });\n      } else console.warn('the gl instance does not support VR!');\n    }\n  }, [ready, invalidateFrameloop]); // Dispose renderer on unmount\n\n  useEffect(function () {\n    return function () {\n      if (state.current.gl) {\n        if (state.current.gl.forceContextLoss) state.current.gl.forceContextLoss();\n        if (state.current.gl.dispose) state.current.gl.dispose();\n        state.current.gl = undefined;\n        unmountComponentAtNode(state.current.scene);\n        state.current.active = false;\n      }\n    };\n  }, []);\n  return state.current.events;\n};\nfunction useContext(context) {\n  var result = useContext$1(context);\n  if (!result) {\n    console.warn('hooks can only be used within the canvas! https://github.com/react-spring/react-three-fiber#hooks');\n  }\n  return result;\n}\nfunction useFrame(callback) {\n  var renderPriority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var _useContext = useContext(stateContext),\n    subscribe = _useContext.subscribe; // Update ref\n\n  var ref = useRef(callback);\n  useLayoutEffect(function () {\n    return void (ref.current = callback);\n  }, [callback]); // Subscribe/unsub\n\n  useEffect(function () {\n    var unsubscribe = subscribe(ref, renderPriority);\n    return function () {\n      return unsubscribe();\n    };\n  }, [renderPriority]);\n  return null;\n}\nfunction useThree() {\n  return useContext(stateContext);\n}\nfunction useUpdate(callback, dependents, optionalRef) {\n  var _useContext2 = useContext(stateContext),\n    invalidate = _useContext2.invalidate;\n  var localRef = useRef();\n  var ref = optionalRef ? optionalRef : localRef;\n  useLayoutEffect(function () {\n    if (ref.current) {\n      callback(ref.current);\n      invalidate();\n    }\n  }, dependents);\n  return ref;\n}\nfunction useResource(optionalRef) {\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    _ = _useState14[0],\n    forceUpdate = _useState14[1];\n  var localRef = useRef(undefined);\n  var ref = optionalRef ? optionalRef : localRef;\n  useLayoutEffect(function () {\n    return void forceUpdate(function (i) {\n      return !i;\n    });\n  }, [ref.current]);\n  return [ref, ref.current];\n}\nvar blackList = ['id', 'uuid', 'type', 'children', 'parent', 'matrix', 'matrixWorld', 'matrixWorldNeedsUpdate', 'modelViewMatrix', 'normalMatrix'];\nfunction prune(props) {\n  var reducedProps = _extends({}, props); // Remove black listed props\n\n  blackList.forEach(function (name) {\n    return delete reducedProps[name];\n  }); // Remove functions\n\n  Object.keys(reducedProps).forEach(function (name) {\n    return typeof reducedProps[name] === 'function' && delete reducedProps[name];\n  }); // Prune materials and geometries\n\n  if (reducedProps.material) reducedProps.material = prune(reducedProps.material);\n  if (reducedProps.geometry) reducedProps.geometry = prune(reducedProps.geometry); // Return cleansed object\n\n  return reducedProps;\n}\nfunction useLoader(Proto, url, extensions) {\n  var loader = useMemo(function () {\n    // Construct new loader\n    var temp = new Proto(); // Run loader extensions\n\n    if (extensions) extensions(temp);\n    return temp;\n  }, [Proto]); // Use suspense to load async assets\n\n  var results = usePromise(function (Proto, url) {\n    var urlArray = Array.isArray(url) ? url : [url];\n    return Promise.all(urlArray.map(function (url) {\n      return new Promise(function (res) {\n        return loader.load(url, function (data) {\n          if (data.scene) {\n            // This has to be deprecated at some point!\n            data.__$ = []; // Nodes and materials are better\n\n            data.nodes = {};\n            data.materials = {};\n            data.scene.traverse(function (obj) {\n              data.__$.push(prune(obj));\n              if (obj.name) data.nodes = _extends({}, data.nodes, _defineProperty({}, obj.name, obj));\n              if (obj.material && !data.materials[obj.material.name]) data.materials[obj.material.name] = obj.material;\n            });\n          }\n          res(data);\n        });\n      });\n    }));\n  }, [Proto, url]); // Return the object/s\n\n  return Array.isArray(url) ? results : results[0];\n}\nvar useCamera = function useCamera() {\n  console.warn(\"The useCamera hook was moved to: https://github.com/react-spring/drei\");\n  return null;\n};\nvar defaultStyles = {\n  position: 'relative',\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden'\n};\nfunction Content(_ref) {\n  var children = _ref.children,\n    setEvents = _ref.setEvents,\n    container = _ref.container,\n    renderer = _ref.renderer,\n    effects = _ref.effects,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"setEvents\", \"container\", \"renderer\", \"effects\"]);\n\n  // Create renderer\n  var _useState15 = useState(renderer),\n    _useState16 = _slicedToArray(_useState15, 1),\n    gl = _useState16[0];\n  if (!gl) console.warn('No renderer created!'); // Mount and unmount managemenbt\n\n  useEffect(function () {\n    return effects && effects(gl, container);\n  }, []); // Init canvas, fetch events, hand them back to the wrapping div\n\n  var events = useCanvas(_extends({}, props, {\n    children: children,\n    gl: gl\n  }));\n  useEffect(function () {\n    return void setEvents(events);\n  }, [events]);\n  return null;\n}\nvar ResizeContainer = React__default.memo(function ResizeContainer(props) {\n  var preRender = props.preRender,\n    resize = props.resize,\n    style = props.style,\n    restSpread = _objectWithoutPropertiesLoose(props, [\"renderer\", \"effects\", \"children\", \"vr\", \"gl2\", \"concurrent\", \"shadowMap\", \"sRGB\", \"colorManagement\", \"orthographic\", \"invalidateFrameloop\", \"updateDefaultCamera\", \"noEvents\", \"gl\", \"camera\", \"raycaster\", \"pixelRatio\", \"onCreated\", \"onPointerMissed\", \"preRender\", \"resize\", \"style\"]);\n  var containerRef = useRef(); // onGotPointerCaptureLegacy is a fake event used by non-web targets to simulate poinzter capture\n\n  var _useState17 = useState({}),\n    _useState18 = _slicedToArray(_useState17, 2),\n    _ref2 = _useState18[0],\n    setEvents = _useState18[1];\n  var events = _objectWithoutPropertiesLoose(_ref2, [\"onGotPointerCaptureLegacy\"]);\n  var _useMeasure = useMeasure(resize || {\n      scroll: true,\n      debounce: {\n        scroll: 50,\n        resize: 0\n      },\n      polyfill: typeof window === 'undefined' || !window.ResizeObserver ? ResizeObserver : undefined\n    }),\n    _useMeasure2 = _slicedToArray(_useMeasure, 2),\n    bind = _useMeasure2[0],\n    size = _useMeasure2[1]; // Flag view ready once it's been measured out\n\n  var readyFlag = useRef(false);\n  var ready = useMemo(function () {\n    return readyFlag.current = readyFlag.current || !!size.width && !!size.height;\n  }, [size]);\n  var state = useMemo(function () {\n    return {\n      size: size,\n      setEvents: setEvents,\n      container: containerRef.current\n    };\n  }, [size]); // Allow Gatsby, Next and other server side apps to run. Will output styles to reduce flickering.\n\n  if (typeof window === 'undefined') return /*#__PURE__*/React__default.createElement(\"div\", _extends({\n    style: _extends({}, defaultStyles, {}, style)\n  }, restSpread), preRender); // Render the canvas into the dom\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({\n    ref: mergeRefs([bind, containerRef]),\n    style: _extends({}, defaultStyles, {}, style)\n  }, events, restSpread), preRender, ready && /*#__PURE__*/React__default.createElement(Content, _extends({}, props, state)));\n});\nvar Canvas = React__default.memo(function Canvas(_ref) {\n  var children = _ref.children,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n  var canvasRef = useRef();\n  return /*#__PURE__*/React__default.createElement(ResizeContainer, _extends({}, props, {\n    renderer: function renderer() {\n      if (canvasRef.current) {\n        var params = _extends({\n          antialias: true,\n          alpha: true\n        }, props.gl);\n        var temp = new WebGLRenderer(_extends({\n          canvas: canvasRef.current,\n          context: props.gl2 ? canvasRef.current.getContext('webgl2', params) : undefined\n        }, params));\n        return temp;\n      }\n    },\n    preRender: /*#__PURE__*/React__default.createElement(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'block'\n      }\n    })\n  }), children);\n});\nvar Dom = function Dom() {\n  console.warn(\"The experimental Dom component was moved to: https://github.com/react-spring/drei\");\n  return null;\n};\nexport { Canvas, Dom, Renderer, addEffect, addTail, applyProps, createPortal, extend, _invalidate as invalidate, isOrthographicCamera, render, renderGl, stateContext, unmountComponentAtNode, useCamera, useCanvas, useFrame, useLoader, useResource, useThree, useUpdate };","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","THREE","Layers","Color","Texture","sRGBEncoding","Vector2","Raycaster","Scene","OrthographicCamera","PerspectiveCamera","Clock","Vector3","PCFSoftShadowMap","ACESFilmicToneMapping","WebGLRenderer","Reconciler","unstable_now","unstable_runWithPriority","unstable_IdlePriority","React__default","createContext","useState","useRef","useMemo","useCallback","useLayoutEffect","useEffect","createElement","useContext","useContext$1","TinyEmitter","usePromise","useMeasure","ResizeObserver","mergeRefs","version","_toPropertyKey","arg","key","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","roots","Map","emptyObject","is","obj","a","Object","arr","fun","str","num","und","Array","isArray","equ","b","i","createSubs","callback","subs","index","length","push","splice","globalEffects","globalTailEffects","addEffect","addTail","renderGl","state","timestamp","repeat","runGlobalEffects","forEach","effect","delta","current","clock","getDelta","subscribers","sub","ref","frames","Math","max","invalidateFrameloop","manual","gl","render","scene","camera","running","renderLoop","root","containerInfo","__state","active","ready","requestAnimationFrame","invalidate","vr","catalogue","extend","objects","applyProps","instance","newProps","oldProps","accumulative","container","__container","sameProps","keys","filter","handlers","startsWith","includes","leftOvers","filteredProps","reduce","acc","prop","rest","map","entries","value","_instance$__container","target","split","set","reverse","name","reverseEntries","isColorManagement","colorManagement","copy","constructor","convertSRGBToLinear","encoding","invalidateInstance","raycast","__handlers","__interaction","indexOf","charAt","toLowerCase","substr","parent","updateInstance","onUpdate","createInstance","type","_ref","hostContext","internalInstanceHandle","args","props","toUpperCase","slice","object","__instance","has","fn","node","return","stateNode","__objects","appendChild","parentInstance","child","isObject3D","add","attach","attachArray","attachObject","insertBefore","beforeChild","dispatchEvent","restSiblings","children","sibling","removeRecursive","array","clone","removeChild","remove","x","dispose","switchInstance","fiber","newInstance","alternate","Renderer","now","warnsIfNotActing","supportsMutation","isPrimaryRenderer","scheduleTimeout","setTimeout","cancelTimeout","clearTimeout","noTimeout","appendInitialChild","appendChildToContainer","removeChildFromContainer","insertInContainerBefore","commitUpdate","updatePayload","argsNew","restNew","argsOld","restOld","hasNewArgs","some","val","hideInstance","visible","unhideInstance","hideTextInstance","Error","getPublicInstance","getRootHostContext","getChildHostContext","createTextInstance","finalizeInitialChildren","prepareUpdate","shouldDeprioritizeSubtree","prepareForCommit","resetAfterCommit","shouldSetTextContent","LegacyRoot","ConcurrentRoot","hasSymbol","for","REACT_PORTAL_TYPE","element","get","newRoot","createContainer","concurrent","updateContainer","getPublicRootInstance","unmountComponentAtNode","delete","createPortal","implementation","$$typeof","injectIntoDevTools","bundleType","process","env","NODE_ENV","rendererPackageName","findHostInstanceByFiber","findHostInstance","isOrthographicCamera","def","makeId","event","eventObject","uuid","stateContext","useCanvas","orthographic","raycaster","size","pixelRatio","shadowMap","sRGB","updateDefaultCamera","noEvents","onCreated","onPointerMissed","setReady","mouse","ray","raycasterProps","defaultRaycaster","defaultScene","cam","position","z","lookAt","defaultCam","_setDefaultCamera","aspect","viewport","width","height","factor","initialClick","initialHits","pointer","captured","events","subscribe","priority","sort","s","setDefaultCamera","intersect","prepare","handlePointerMove","distance","distanceTo","fov","PI","tan","left","right","top","bottom","updateProjectionMatrix","updateMatrixWorld","setSize","prepareRay","clientX","clientY","setFromCamera","seen","Set","hits","eventsObjects","intersects","intersectObjects","item","id","sharedState","calculateDistance","dx","dy","round","sqrt","hovered","temp","handleIntersects","intersections","find","hit","unprojectedPoint","y","unproject","releasePointerCapture","localState","stopped","setPointerCapture","raycastEvent","stopPropagation","currentTarget","sourceEvent","from","values","handlePointerCancel","emit","data","pointerMove","pointerOver","pointerEnter","pointerOut","pointerLeave","hoveredItem","handlePointer","onClick","onWheel","onPointerDown","onPointerUp","onPointerLeave","e","onPointerMove","onGotPointerCaptureLegacy","onLostPointerCapture","_state$current","setPixelRatio","enabled","assign","toneMapping","outputEncoding","Canvas","activate","result","then","Provider","xr","setAnimationLoop","t","console","warn","forceContextLoss","context","useFrame","renderPriority","unsubscribe","useThree","useUpdate","dependents","optionalRef","localRef","useResource","_","forceUpdate","blackList","prune","reducedProps","material","geometry","useLoader","Proto","url","extensions","loader","results","urlArray","Promise","all","load","__$","nodes","materials","traverse","useCamera","defaultStyles","overflow","Content","setEvents","renderer","effects","ResizeContainer","memo","preRender","resize","style","restSpread","containerRef","_ref2","scroll","debounce","polyfill","window","bind","readyFlag","canvasRef","params","antialias","alpha","canvas","gl2","getContext","display","Dom"],"sources":["/Users/mac/Desktop/react-3js-word-sphere/node_modules/react-three-fiber/web.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport * as THREE from 'three';\nimport { Layers, Color, Texture, sRGBEncoding, Vector2, Raycaster, Scene, OrthographicCamera, PerspectiveCamera, Clock, Vector3, PCFSoftShadowMap, ACESFilmicToneMapping, WebGLRenderer } from 'three';\nimport Reconciler from 'react-reconciler';\nimport { unstable_now, unstable_runWithPriority, unstable_IdlePriority } from 'scheduler';\nimport React__default, { createContext, useState, useRef, useMemo, useCallback, useLayoutEffect, useEffect, createElement, useContext as useContext$1 } from 'react';\nimport { TinyEmitter } from 'tiny-emitter';\nimport usePromise from 'react-promise-suspense';\nimport useMeasure from 'react-use-measure';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport mergeRefs from 'react-merge-refs';\n\nvar version = \"4.2.4\";\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nconst roots = new Map();\nconst emptyObject = {};\nconst is = {\n  obj: a => a === Object(a) && !is.arr(a),\n  fun: a => typeof a === 'function',\n  str: a => typeof a === 'string',\n  num: a => typeof a === 'number',\n  und: a => a === void 0,\n  arr: a => Array.isArray(a),\n\n  equ(a, b) {\n    // Wrong type or one of the two undefined, doesn't match\n    if (typeof a !== typeof b || !!a !== !!b) return false; // Atomic, just compare a against b\n\n    if (is.str(a) || is.num(a) || is.obj(a)) return a === b; // Array, shallow compare first to see if it's a match\n\n    if (is.arr(a) && a == b) return true; // Last resort, go through keys\n\n    let i;\n\n    for (i in a) if (!(i in b)) return false;\n\n    for (i in b) if (a[i] !== b[i]) return false;\n\n    return is.und(i) ? a === b : true;\n  }\n\n};\n\nfunction createSubs(callback, subs) {\n  const index = subs.length;\n  subs.push(callback);\n  return () => void subs.splice(index, 1);\n}\n\nlet globalEffects = [];\nlet globalTailEffects = [];\nconst addEffect = callback => createSubs(callback, globalEffects);\nconst addTail = callback => createSubs(callback, globalTailEffects);\nfunction renderGl(state, timestamp, repeat = 0, runGlobalEffects = false) {\n  // Run global effects\n  if (runGlobalEffects) globalEffects.forEach(effect => effect(timestamp) && repeat++); // Run local effects\n\n  const delta = state.current.clock.getDelta();\n  state.current.subscribers.forEach(sub => sub.ref.current(state.current, delta)); // Decrease frame count\n\n  state.current.frames = Math.max(0, state.current.frames - 1);\n  repeat += !state.current.invalidateFrameloop ? 1 : state.current.frames; // Render content\n\n  if (!state.current.manual) state.current.gl.render(state.current.scene, state.current.camera);\n  return repeat;\n}\nlet running = false;\n\nfunction renderLoop(timestamp) {\n  running = true;\n  let repeat = 0; // Run global effects\n\n  globalEffects.forEach(effect => effect(timestamp) && repeat++);\n  roots.forEach(root => {\n    const state = root.containerInfo.__state; // If the frameloop is invalidated, do not run another frame\n\n    if (state.current.active && state.current.ready && (!state.current.invalidateFrameloop || state.current.frames > 0)) repeat = renderGl(state, timestamp, repeat);\n  });\n  if (repeat !== 0) return requestAnimationFrame(renderLoop);else {\n    // Tail call effects, they are called when rendering stops\n    globalTailEffects.forEach(effect => effect(timestamp));\n  } // Flag end of operation\n\n  running = false;\n}\n\nfunction invalidate(state = true, frames = 2) {\n  if (state === true) roots.forEach(root => root.containerInfo.__state.current.frames = frames);else if (state && state.current) {\n    if (state.current.vr) return;\n    state.current.frames = frames;\n  }\n\n  if (!running) {\n    running = true;\n    requestAnimationFrame(renderLoop);\n  }\n}\nlet catalogue = {};\nconst extend = objects => void (catalogue = _extends({}, catalogue, {}, objects));\nfunction applyProps(instance, newProps, oldProps = {}, accumulative = false) {\n  // Filter equals, events and reserved props\n  const container = instance.__container;\n  const sameProps = Object.keys(newProps).filter(key => is.equ(newProps[key], oldProps[key]));\n  const handlers = Object.keys(newProps).filter(key => {\n    // Event-handlers ...\n    //   are functions, that\n    //   start with \"on\", and\n    //   contain the name \"pointer\", or \"wheel\", or \"click\"\n    if (is.fun(newProps[key]) && key.startsWith('on')) {\n      return key.includes('Pointer') || key.includes('Click') || key.includes('Wheel');\n    }\n  });\n  const leftOvers = accumulative ? Object.keys(oldProps).filter(key => newProps[key] === void 0) : [];\n  const filteredProps = [...sameProps, 'children', 'key', 'ref'].reduce((acc, prop) => {\n    let rest = _objectWithoutPropertiesLoose(acc, [prop].map(_toPropertyKey));\n\n    return rest;\n  }, newProps); // Add left-overs as undefined props so they can be removed\n\n  leftOvers.forEach(key => key !== 'children' && (filteredProps[key] = undefined));\n\n  if (Object.keys(filteredProps).length > 0) {\n    Object.entries(filteredProps).forEach(([key, value]) => {\n      if (!handlers.includes(key)) {\n        var _instance$__container;\n\n        let root = instance;\n        let target = root[key];\n\n        if (key.includes('-')) {\n          const entries = key.split('-');\n          target = entries.reduce((acc, key) => acc[key], instance); // If the target is atomic, it forces us to switch the root\n\n          if (!(target && target.set)) {\n            const [name, ...reverseEntries] = entries.reverse();\n            root = reverseEntries.reverse().reduce((acc, key) => acc[key], instance);\n            key = name;\n          }\n        } // Special treatment for objects with support for set/copy\n\n\n        const isColorManagement = (_instance$__container = instance.__container) == null ? void 0 : _instance$__container.__state.current.colorManagement;\n\n        if (target && target.set && (target.copy || target instanceof Layers)) {\n          // If value is an array it has got to be the set function\n          if (Array.isArray(value)) target.set(...value); // Test again target.copy(class) next ...\n          else if (target.copy && value && value.constructor && target.constructor.name === value.constructor.name) target.copy(value); // If nothing else fits, just set the single value, ignore undefined\n            // https://github.com/react-spring/react-three-fiber/issues/274\n            else if (value !== undefined) {\n                target.set(value); // Auto-convert sRGB colors, for now ...\n                // https://github.com/react-spring/react-three-fiber/issues/344\n\n                if (isColorManagement && target instanceof Color) {\n                  target.convertSRGBToLinear();\n                }\n              } // Else, just overwrite the value\n        } else {\n          root[key] = value; // Auto-convert sRGB textures, for now ...\n          // https://github.com/react-spring/react-three-fiber/issues/344\n\n          if (isColorManagement && root[key] instanceof Texture) {\n            root[key].encoding = sRGBEncoding;\n          }\n        }\n\n        invalidateInstance(instance);\n      }\n    }); // Preemptively delete the instance from the containers interaction\n\n    if (accumulative && container && instance.raycast && instance.__handlers) {\n      instance.__handlers = undefined;\n\n      const index = container.__interaction.indexOf(instance);\n\n      if (index > -1) container.__interaction.splice(index, 1);\n    } // Prep interaction handlers\n\n\n    if (handlers.length) {\n      // Add interactive object to central container\n      if (container && instance.raycast) container.__interaction.push(instance); // Add handlers to the instances handler-map\n\n      instance.__handlers = handlers.reduce((acc, key) => _extends({}, acc, {\n        [key.charAt(2).toLowerCase() + key.substr(3)]: newProps[key]\n      }), {});\n    } // Call the update lifecycle when it is being updated, but only when it is part of the scene\n\n\n    if (instance.parent) updateInstance(instance);\n  }\n}\n\nfunction invalidateInstance(instance) {\n  if (instance.__container && instance.__container.__state) invalidate(instance.__container.__state);\n}\n\nfunction updateInstance(instance) {\n  if (instance.onUpdate) instance.onUpdate(instance);\n}\n\nfunction createInstance(type, _ref, container, hostContext, internalInstanceHandle) {\n  let {\n    args = []\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"args\"]);\n\n  let name = \"\" + type[0].toUpperCase() + type.slice(1);\n  let instance;\n\n  if (type === 'primitive') {\n    instance = props.object;\n    instance.__instance = true;\n  } else if (type === 'new') {\n    instance = new props.object(args);\n  } else {\n    const target = catalogue[name] || THREE[name];\n\n    if (!target) {\n      throw \"\\\"\" + name + \"\\\" is not part of the THREE namespace! Did you forget to extend it? See: https://github.com/react-spring/react-three-fiber#using-3rd-party-non-three-namespaced-objects-in-the-scene-graph\";\n    }\n\n    instance = is.arr(args) ? new target(...args) : new target(args);\n  } // Bind to the root container in case portals are being used\n  // This is perhaps better for event management as we can keep them on a single instance\n\n\n  while (container.__container) {\n    container = container.__container;\n  } // TODO: https://github.com/facebook/react/issues/17147\n  // If it's still not there it means the portal was created on a virtual node outside of react\n\n\n  if (!roots.has(container)) {\n    const fn = node => {\n      if (!node.return) return node.stateNode && node.stateNode.containerInfo;else return fn(node.return);\n    };\n\n    container = fn(internalInstanceHandle);\n  } // Apply initial props\n\n\n  instance.__objects = [];\n  instance.__container = container; // It should NOT call onUpdate on object instanciation, because it hasn't been added to the\n  // view yet. If the callback relies on references for instance, they won't be ready yet, this is\n  // why it passes \"false\" here\n\n  applyProps(instance, props, {});\n  return instance;\n}\n\nfunction appendChild(parentInstance, child) {\n  if (child) {\n    if (child.isObject3D) parentInstance.add(child);else {\n      parentInstance.__objects.push(child);\n\n      child.parent = parentInstance; // The attach attribute implies that the object attaches itself on the parent\n\n      if (child.attach) parentInstance[child.attach] = child;else if (child.attachArray) {\n        if (!is.arr(parentInstance[child.attachArray])) parentInstance[child.attachArray] = [];\n        parentInstance[child.attachArray].push(child);\n      } else if (child.attachObject) {\n        if (!is.obj(parentInstance[child.attachObject[0]])) parentInstance[child.attachObject[0]] = {};\n        parentInstance[child.attachObject[0]][child.attachObject[1]] = child;\n      }\n    }\n    updateInstance(child);\n    invalidateInstance(child);\n  }\n}\n\nfunction insertBefore(parentInstance, child, beforeChild) {\n  if (child) {\n    if (child.isObject3D) {\n      child.parent = parentInstance;\n      child.dispatchEvent({\n        type: 'added'\n      });\n      const restSiblings = parentInstance.children.filter(sibling => sibling !== child); // TODO: the order is out of whack if data objects are present, has to be recalculated\n\n      const index = restSiblings.indexOf(beforeChild);\n      parentInstance.children = [...restSiblings.slice(0, index), child, ...restSiblings.slice(index)];\n      updateInstance(child);\n    } else appendChild(parentInstance, child); // TODO: order!!!\n\n\n    invalidateInstance(child);\n  }\n}\n\nfunction removeRecursive(array, parent, clone = false) {\n  if (array) {\n    // Three uses splice op's internally we may have to shallow-clone the array in order to safely remove items\n    const target = clone ? [...array] : array;\n    target.forEach(child => removeChild(parent, child));\n  }\n}\n\nfunction removeChild(parentInstance, child) {\n  if (child) {\n    if (child.isObject3D) {\n      parentInstance.remove(child);\n    } else {\n      child.parent = null;\n      parentInstance.__objects = parentInstance.__objects.filter(x => x !== child); // Remove attachment\n\n      if (child.attach) parentInstance[child.attach] = null;else if (child.attachArray) parentInstance[child.attachArray] = parentInstance[child.attachArray].filter(x => x !== child);else if (child.attachObject) {\n        delete parentInstance[child.attachObject[0]][child.attachObject[1]];\n      }\n    }\n\n    invalidateInstance(child); // Allow objects to bail out of recursive dispose alltogether by passing dispose={null}\n\n    if (child.dispose !== null) {\n      unstable_runWithPriority(unstable_IdlePriority, () => {\n        // Remove interactivity\n        if (child.__container) child.__container.__interaction = child.__container.__interaction.filter(x => x !== child); // Remove nested child objects\n\n        removeRecursive(child.__objects, child);\n        removeRecursive(child.children, child, true); // Dispose item\n\n        if (child.dispose) child.dispose(); // Remove references\n\n        delete child.__container;\n        delete child.__objects;\n      });\n    }\n  }\n}\n\nfunction switchInstance(instance, type, newProps, fiber) {\n  const parent = instance.parent;\n  const newInstance = createInstance(type, newProps, instance.__container, null, fiber);\n  removeChild(parent, instance);\n  appendChild(parent, newInstance) // This evil hack switches the react-internal fiber node\n  // https://github.com/facebook/react/issues/14983\n  // https://github.com/facebook/react/pull/15021\n  ;\n  [fiber, fiber.alternate].forEach(fiber => {\n    if (fiber !== null) {\n      fiber.stateNode = newInstance;\n\n      if (fiber.ref) {\n        if (is.fun(fiber.ref)) fiber.ref(newInstance);else fiber.ref.current = newInstance;\n      }\n    }\n  });\n}\n\nconst Renderer = Reconciler({\n  now: unstable_now,\n  createInstance,\n  removeChild,\n  appendChild,\n  insertBefore,\n  // @ts-ignore\n  warnsIfNotActing: true,\n  supportsMutation: true,\n  isPrimaryRenderer: false,\n  scheduleTimeout: is.fun(setTimeout) ? setTimeout : undefined,\n  cancelTimeout: is.fun(clearTimeout) ? clearTimeout : undefined,\n  // @ts-ignore\n  setTimeout: is.fun(setTimeout) ? setTimeout : undefined,\n  // @ts-ignore\n  clearTimeout: is.fun(clearTimeout) ? clearTimeout : undefined,\n  noTimeout: -1,\n  appendInitialChild: appendChild,\n  appendChildToContainer: appendChild,\n  removeChildFromContainer: removeChild,\n  insertInContainerBefore: insertBefore,\n\n  commitUpdate(instance, updatePayload, type, oldProps, newProps, fiber) {\n    if (instance.__instance && newProps.object && newProps.object !== instance) {\n      // <instance object={...} /> where the object reference has changed\n      switchInstance(instance, type, newProps, fiber);\n    } else {\n      // This is a data object, let's extract critical information about it\n      const {\n        args: argsNew = []\n      } = newProps,\n            restNew = _objectWithoutPropertiesLoose(newProps, [\"args\"]);\n\n      const {\n        args: argsOld = []\n      } = oldProps,\n            restOld = _objectWithoutPropertiesLoose(oldProps, [\"args\"]); // If it has new props or arguments, then it needs to be re-instanciated\n\n\n      const hasNewArgs = argsNew.some((value, index) => is.obj(value) ? Object.entries(value).some(([key, val]) => val !== argsOld[index][key]) : value !== argsOld[index]);\n\n      if (hasNewArgs) {\n        // Next we create a new instance and append it again\n        switchInstance(instance, type, newProps, fiber);\n      } else {\n        // Otherwise just overwrite props\n        applyProps(instance, restNew, restOld, true);\n      }\n    }\n  },\n\n  hideInstance(instance) {\n    if (instance.isObject3D) {\n      instance.visible = false;\n      invalidateInstance(instance);\n    }\n  },\n\n  unhideInstance(instance, props) {\n    if (instance.isObject3D && props.visible == null || props.visible) {\n      instance.visible = true;\n      invalidateInstance(instance);\n    }\n  },\n\n  hideTextInstance() {\n    throw new Error('Text is not allowed in the react-three-fibre tree. You may have extraneous whitespace between components.');\n  },\n\n  getPublicInstance(instance) {\n    return instance;\n  },\n\n  getRootHostContext() {\n    return emptyObject;\n  },\n\n  getChildHostContext() {\n    return emptyObject;\n  },\n\n  createTextInstance() {},\n\n  finalizeInitialChildren() {\n    return false;\n  },\n\n  prepareUpdate() {\n    return emptyObject;\n  },\n\n  shouldDeprioritizeSubtree() {\n    return false;\n  },\n\n  prepareForCommit() {},\n\n  resetAfterCommit() {},\n\n  shouldSetTextContent() {\n    return false;\n  }\n\n});\nconst LegacyRoot = 0;\nconst ConcurrentRoot = 2;\nconst hasSymbol = is.fun(Symbol) && Symbol.for;\nconst REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\nfunction render(element, container, state) {\n  let root = roots.get(container);\n\n  if (!root) {\n    container.__state = state;\n    let newRoot = root = Renderer.createContainer(container, state !== undefined && state.current.concurrent ? ConcurrentRoot : LegacyRoot, false);\n    roots.set(container, newRoot);\n  }\n\n  Renderer.updateContainer(element, root, null, () => undefined);\n  return Renderer.getPublicRootInstance(root);\n}\nfunction unmountComponentAtNode(container) {\n  const root = roots.get(container);\n  if (root) Renderer.updateContainer(null, root, null, () => void roots.delete(container));\n}\nfunction createPortal(children, containerInfo, implementation, key = null) {\n  if (!containerInfo.__objects) containerInfo.__objects = [];\n  return {\n    $$typeof: REACT_PORTAL_TYPE,\n    key: key == null ? null : '' + key,\n    children,\n    containerInfo,\n    implementation\n  };\n}\nRenderer.injectIntoDevTools({\n  bundleType: process.env.NODE_ENV === 'production' ? 0 : 1,\n  version: version,\n  rendererPackageName: 'react-three-fiber',\n  findHostInstanceByFiber: Renderer.findHostInstance\n});\n\nfunction isOrthographicCamera(def) {\n  return def.isOrthographicCamera;\n}\n\nfunction makeId(event) {\n  return (event.eventObject || event.object).uuid + '/' + event.index;\n}\n\nconst stateContext = createContext({});\nconst useCanvas = props => {\n  const {\n    children,\n    gl,\n    camera,\n    orthographic,\n    raycaster,\n    size,\n    pixelRatio,\n    vr = false,\n    concurrent = false,\n    shadowMap = false,\n    sRGB = false,\n    colorManagement = false,\n    invalidateFrameloop = false,\n    updateDefaultCamera = true,\n    noEvents = false,\n    onCreated,\n    onPointerMissed\n  } = props; // Local, reactive state\n\n  const [ready, setReady] = useState(false);\n  const [mouse] = useState(() => new Vector2());\n  const [defaultRaycaster] = useState(() => {\n    const ray = new Raycaster();\n\n    if (raycaster) {\n      const raycasterProps = _objectWithoutPropertiesLoose(raycaster, [\"filter\"]);\n\n      applyProps(ray, raycasterProps, {});\n    }\n\n    return ray;\n  });\n  const [defaultScene] = useState(() => {\n    const scene = new Scene();\n    scene.__interaction = [];\n    scene.__objects = [];\n    return scene;\n  });\n  const [defaultCam, _setDefaultCamera] = useState(() => {\n    const cam = orthographic ? new OrthographicCamera(0, 0, 0, 0, 0.1, 1000) : new PerspectiveCamera(75, 0, 0.1, 1000);\n    cam.position.z = 5;\n    if (camera) applyProps(cam, camera, {}); // Always look at [0, 0, 0]\n\n    cam.lookAt(0, 0, 0);\n    return cam;\n  });\n  const [clock] = useState(() => new Clock()); // Public state\n\n  const state = useRef({\n    ready: false,\n    active: true,\n    manual: 0,\n    colorManagement,\n    sRGB,\n    vr,\n    concurrent,\n    noEvents,\n    invalidateFrameloop: false,\n    frames: 0,\n    aspect: 0,\n    subscribers: [],\n    camera: defaultCam,\n    scene: defaultScene,\n    raycaster: defaultRaycaster,\n    mouse,\n    clock,\n    gl,\n    size,\n    viewport: {\n      width: 0,\n      height: 0,\n      factor: 0\n    },\n    initialClick: [0, 0],\n    initialHits: [],\n    pointer: new TinyEmitter(),\n    captured: undefined,\n    events: undefined,\n    subscribe: (ref, priority = 0) => {\n      // If this subscription was given a priority, it takes rendering into its own hands\n      // For that reason we switch off automatic rendering and increase the manual flag\n      // As long as this flag is positive (there could be multiple render subscription)\n      // ..there can be no internal rendering at all\n      if (priority) state.current.manual++;\n      state.current.subscribers.push({\n        ref,\n        priority: priority\n      }); // Sort layers from lowest to highest, meaning, highest priority renders last (on top of the other frames)\n\n      state.current.subscribers = state.current.subscribers.sort((a, b) => a.priority - b.priority);\n      return () => {\n        // Decrease manual flag if this subscription had a priority\n        if (priority) state.current.manual--;\n        state.current.subscribers = state.current.subscribers.filter(s => s.ref !== ref);\n      };\n    },\n    setDefaultCamera: camera => _setDefaultCamera(camera),\n    invalidate: () => invalidate(state),\n    intersect: (event = {}, prepare = true) => handlePointerMove(event, prepare)\n  }); // Writes locals into public state for distribution among subscribers, context, etc\n\n  useMemo(() => {\n    state.current.ready = ready;\n    state.current.size = size;\n    state.current.camera = defaultCam;\n    state.current.invalidateFrameloop = invalidateFrameloop;\n    state.current.vr = vr;\n    state.current.gl = gl;\n    state.current.concurrent = concurrent;\n    state.current.noEvents = noEvents;\n  }, [invalidateFrameloop, vr, concurrent, noEvents, ready, size, defaultCam, gl]); // Adjusts default camera\n\n  useMemo(() => {\n    state.current.aspect = size.width / size.height;\n\n    if (isOrthographicCamera(defaultCam)) {\n      state.current.viewport = {\n        width: size.width,\n        height: size.height,\n        factor: 1\n      };\n    } else {\n      const target = new Vector3(0, 0, 0);\n      const distance = defaultCam.position.distanceTo(target);\n      const fov = defaultCam.fov * Math.PI / 180; // convert vertical fov to radians\n\n      const height = 2 * Math.tan(fov / 2) * distance; // visible height\n\n      const width = height * state.current.aspect;\n      state.current.viewport = {\n        width,\n        height,\n        factor: size.width / width\n      };\n    } // #92 (https://github.com/drcmda/react-three-fiber/issues/92)\n    // Sometimes automatic default camera adjustment isn't wanted behaviour\n\n\n    if (updateDefaultCamera) {\n      if (isOrthographicCamera(defaultCam)) {\n        defaultCam.left = size.width / -2;\n        defaultCam.right = size.width / 2;\n        defaultCam.top = size.height / 2;\n        defaultCam.bottom = size.height / -2;\n      } else {\n        defaultCam.aspect = state.current.aspect;\n      }\n\n      defaultCam.updateProjectionMatrix(); // #178: https://github.com/react-spring/react-three-fiber/issues/178\n      // Update matrix world since the renderer is a frame late\n\n      defaultCam.updateMatrixWorld();\n    }\n\n    gl.setSize(size.width, size.height);\n    if (ready) invalidate(state);\n  }, [defaultCam, size, updateDefaultCamera]);\n  /** Events ------------------------------------------------------------------------------------------------ */\n\n  /** Sets up defaultRaycaster */\n\n  const prepareRay = useCallback(({\n    clientX,\n    clientY\n  }) => {\n    if (clientX !== void 0) {\n      const {\n        left,\n        right,\n        top,\n        bottom\n      } = state.current.size;\n      mouse.set((clientX - left) / (right - left) * 2 - 1, -((clientY - top) / (bottom - top)) * 2 + 1);\n      defaultRaycaster.setFromCamera(mouse, state.current.camera);\n    }\n  }, []);\n  /** Intersects interaction objects using the event input */\n\n  const intersect = useCallback((event, filter) => {\n    // Skip event handling when noEvents is set\n    if (state.current.noEvents) return [];\n    const seen = new Set();\n    const hits = []; // Allow callers to eliminate event objects\n\n    const eventsObjects = filter ? filter(state.current.scene.__interaction) : state.current.scene.__interaction; // Intersect known handler objects and filter against duplicates\n\n    let intersects = defaultRaycaster.intersectObjects(eventsObjects, true).filter(item => {\n      const id = makeId(item);\n      if (seen.has(id)) return false;\n      seen.add(id);\n      return true;\n    }); // #16031: (https://github.com/mrdoob/three.js/issues/16031)\n    // Allow custom userland intersect sort order\n\n    if (raycaster && raycaster.filter && sharedState.current) intersects = raycaster.filter(intersects, sharedState.current);\n\n    for (let intersect of intersects) {\n      let eventObject = intersect.object; // Bubble event up\n\n      while (eventObject) {\n        const handlers = eventObject.__handlers;\n        if (handlers) hits.push(_extends({}, intersect, {\n          eventObject\n        }));\n        eventObject = eventObject.parent;\n      }\n    }\n\n    return hits;\n  }, []);\n  /**  Calculates click deltas */\n\n  const calculateDistance = useCallback(event => {\n    let dx = event.clientX - state.current.initialClick[0];\n    let dy = event.clientY - state.current.initialClick[1];\n    return Math.round(Math.sqrt(dx * dx + dy * dy));\n  }, []);\n  const hovered = useMemo(() => new Map(), []);\n  /**  Handles intersections by forwarding them to handlers */\n\n  const temp = new Vector3();\n  const handleIntersects = useCallback((event, fn, filter) => {\n    // Get fresh intersects\n    let intersections = intersect(event, filter); // If the interaction is captured take that into account, the captured event has to be part of the intersects\n\n    if (state.current.captured && event.type !== 'click' && event.type !== 'wheel') {\n      state.current.captured.forEach(captured => {\n        if (!intersections.find(hit => hit.eventObject === captured.eventObject)) intersections.push(captured);\n      });\n    } // If anything has been found, forward it to the event listeners\n\n\n    if (intersections.length) {\n      const unprojectedPoint = temp.set(mouse.x, mouse.y, 0).unproject(state.current.camera);\n      const delta = event.type === 'click' ? calculateDistance(event) : 0;\n\n      const releasePointerCapture = id => event.target.releasePointerCapture(id);\n\n      const localState = {\n        stopped: false,\n        captured: false\n      };\n\n      for (let hit of intersections) {\n        const setPointerCapture = id => {\n          // If the hit is going to be captured flag that we're in captured state\n          if (!localState.captured) {\n            localState.captured = true; // The captured hit array is reset to collect hits\n\n            state.current.captured = [];\n          } // Push hits to the array\n\n\n          if (state.current.captured) state.current.captured.push(hit) // Call the original event now\n          ;\n          event.target.setPointerCapture(id);\n        };\n\n        let raycastEvent = _extends({}, event, {}, hit, {\n          intersections,\n          stopped: localState.stopped,\n          delta,\n          unprojectedPoint,\n          ray: defaultRaycaster.ray,\n          camera: state.current.camera,\n          // Hijack stopPropagation, which just sets a flag\n          stopPropagation: () => raycastEvent.stopped = localState.stopped = true,\n          // Pointer-capture needs the hit, on which the user may call stopPropagation()\n          // This makes it harder to use the actual event, because then we loose the connection\n          // to the actual hit, which would mean it's picking up all intersects ...\n          target: _extends({}, event.target, {\n            setPointerCapture,\n            releasePointerCapture\n          }),\n          currentTarget: _extends({}, event.currentTarget, {\n            setPointerCapture,\n            releasePointerCapture\n          }),\n          sourceEvent: event\n        });\n\n        fn(raycastEvent);\n\n        if (localState.stopped === true) {\n          // Propagation is stopped, remove all other hover records\n          // An event handler is only allowed to flush other handlers if it is hovered itself\n          if (hovered.size && Array.from(hovered.values()).find(i => i.object === hit.object)) {\n            handlePointerCancel(raycastEvent, [hit]);\n          }\n\n          break;\n        }\n      }\n    }\n\n    return intersections;\n  }, []);\n  const handlePointerMove = useCallback((event, prepare = true) => {\n    state.current.pointer.emit('pointerMove', event);\n    if (prepare) prepareRay(event);\n    const hits = handleIntersects(event, data => {\n      const eventObject = data.eventObject;\n      const handlers = eventObject.__handlers; // Check presence of handlers\n\n      if (!handlers) return; // Call mouse move\n\n      if (handlers.pointerMove) handlers.pointerMove(data); // Check if mouse enter or out is present\n\n      if (handlers.pointerOver || handlers.pointerEnter || handlers.pointerOut || handlers.pointerLeave) {\n        const id = makeId(data);\n        const hoveredItem = hovered.get(id);\n\n        if (!hoveredItem) {\n          // If the object wasn't previously hovered, book it and call its handler\n          hovered.set(id, data);\n          if (handlers.pointerOver) handlers.pointerOver(_extends({}, data, {\n            type: 'pointerover'\n          }));\n          if (handlers.pointerEnter) handlers.pointerEnter(_extends({}, data, {\n            type: 'pointerEnter'\n          }));\n        } else if (hoveredItem.stopped) {\n          // If the object was previously hovered and stopped, we shouldn't allow other items to proceed\n          data.stopPropagation();\n        }\n      }\n    }, // This is onPointerMove, we're only interested in events that exhibit this particular event\n    objects => objects.filter(obj => ['Move', 'Over', 'Enter', 'Out', 'Leave'].some(name => obj.__handlers['pointer' + name]))); // Take care of unhover\n\n    handlePointerCancel(event, hits, prepare);\n    return hits;\n  }, []);\n  const handlePointerCancel = useCallback((event, hits, prepare = true) => {\n    state.current.pointer.emit('pointerCancel', event);\n    if (prepare) prepareRay(event);\n    if (!hits) hits = handleIntersects(event, () => null);\n    Array.from(hovered.values()).forEach(data => {\n      // When no objects were hit or the the hovered object wasn't found underneath the cursor\n      // we call onPointerOut and delete the object from the hovered-elements map\n      if (hits && (!hits.length || !hits.find(i => i.eventObject === data.eventObject))) {\n        const eventObject = data.eventObject;\n        const handlers = eventObject.__handlers;\n\n        if (handlers) {\n          if (handlers.pointerOut) handlers.pointerOut(_extends({}, data, {\n            type: 'pointerout'\n          }));\n          if (handlers.pointerLeave) handlers.pointerLeave(_extends({}, data, {\n            type: 'pointerleave'\n          }));\n        }\n\n        hovered.delete(makeId(data));\n      }\n    });\n  }, []);\n  const handlePointer = useCallback(name => (event, prepare = true) => {\n    state.current.pointer.emit(name, event);\n    if (prepare) prepareRay(event);\n    const hits = handleIntersects(event, data => {\n      const eventObject = data.eventObject;\n      const handlers = eventObject.__handlers;\n\n      if (handlers && handlers[name]) {\n        // Forward all events back to their respective handlers with the exception of click,\n        // which must must the initial target\n        if (name !== 'click' || state.current.initialHits.includes(eventObject)) handlers[name](data);\n      }\n    }); // If a click yields no results, pass it back to the user as a miss\n\n    if (name === 'pointerDown') {\n      state.current.initialClick = [event.clientX, event.clientY];\n      state.current.initialHits = hits.map(hit => hit.eventObject);\n    }\n\n    if (name === 'click' && !hits.length && onPointerMissed) {\n      if (calculateDistance(event) <= 2) onPointerMissed();\n    }\n  }, [onPointerMissed]);\n  useMemo(() => {\n    state.current.events = {\n      onClick: handlePointer('click'),\n      onWheel: handlePointer('wheel'),\n      onPointerDown: handlePointer('pointerDown'),\n      onPointerUp: handlePointer('pointerUp'),\n      onPointerLeave: e => handlePointerCancel(e, []),\n      onPointerMove: handlePointerMove,\n      // onGotPointerCapture is not needed any longer because the behaviour is hacked into\n      // the event itself (see handleIntersects). But in order for non-web targets to simulate\n      // it we keep the legacy event, which simply flags all current intersects as captured\n      onGotPointerCaptureLegacy: e => state.current.captured = intersect(e),\n      onLostPointerCapture: e => (state.current.captured = undefined, handlePointerCancel(e))\n    };\n  }, [onPointerMissed]);\n  /** Events ------------------------------------------------------------------------------------------------- */\n  // Only trigger the context provider when necessary\n\n  const sharedState = useRef();\n  useMemo(() => {\n    const _state$current = state.current,\n          props = _objectWithoutPropertiesLoose(_state$current, [\"ready\", \"manual\", \"vr\", \"noEvents\", \"invalidateFrameloop\", \"frames\", \"subscribers\", \"captured\", \"initialClick\", \"initialHits\"]);\n\n    sharedState.current = props;\n  }, [size, defaultCam]); // Update pixel ratio\n\n  useLayoutEffect(() => void (pixelRatio && gl.setPixelRatio(pixelRatio)), [pixelRatio]); // Update shadow map\n\n  useLayoutEffect(() => {\n    if (shadowMap) {\n      gl.shadowMap.enabled = true;\n      if (typeof shadowMap === 'object') Object.assign(gl, shadowMap);else gl.shadowMap.type = PCFSoftShadowMap;\n    }\n\n    if (sRGB || colorManagement) {\n      gl.toneMapping = ACESFilmicToneMapping;\n      gl.outputEncoding = sRGBEncoding;\n    }\n  }, [shadowMap, sRGB, colorManagement]); // This component is a bridge into the three render context, when it gets rendered\n  // we know we are ready to compile shaders, call subscribers, etc\n\n  const Canvas = useCallback(function Canvas(props) {\n    const activate = () => setReady(true); // eslint-disable-next-line react-hooks/rules-of-hooks\n\n\n    useEffect(() => {\n      const result = onCreated && onCreated(state.current);\n      return void (result && result.then ? result.then(activate) : activate());\n    }, []);\n    return props.children;\n  }, []); // Render v-dom into scene\n\n  useLayoutEffect(() => {\n    render( /*#__PURE__*/createElement(Canvas, null, /*#__PURE__*/createElement(stateContext.Provider, {\n      value: sharedState.current\n    }, typeof children === 'function' ? children(state.current) : children)), defaultScene, state);\n  }, [ready, children, sharedState.current]);\n  useLayoutEffect(() => {\n    if (ready) {\n      // Start render-loop, either via RAF or setAnimationLoop for VR\n      if (!state.current.vr) {\n        invalidate(state);\n      } else if ((gl.xr || gl.vr) && gl.setAnimationLoop) {\n        (gl.xr || gl.vr).enabled = true;\n        gl.setAnimationLoop(t => renderGl(state, t, 0, true));\n      } else console.warn('the gl instance does not support VR!');\n    }\n  }, [ready, invalidateFrameloop]); // Dispose renderer on unmount\n\n  useEffect(() => () => {\n    if (state.current.gl) {\n      if (state.current.gl.forceContextLoss) state.current.gl.forceContextLoss();\n      if (state.current.gl.dispose) state.current.gl.dispose();\n      state.current.gl = undefined;\n      unmountComponentAtNode(state.current.scene);\n      state.current.active = false;\n    }\n  }, []);\n  return state.current.events;\n};\n\nfunction useContext(context) {\n  let result = useContext$1(context);\n\n  if (!result) {\n    console.warn('hooks can only be used within the canvas! https://github.com/react-spring/react-three-fiber#hooks');\n  }\n\n  return result;\n}\n\nfunction useFrame(callback, renderPriority = 0) {\n  const {\n    subscribe\n  } = useContext(stateContext); // Update ref\n\n  const ref = useRef(callback);\n  useLayoutEffect(() => void (ref.current = callback), [callback]); // Subscribe/unsub\n\n  useEffect(() => {\n    const unsubscribe = subscribe(ref, renderPriority);\n    return () => unsubscribe();\n  }, [renderPriority]);\n  return null;\n}\nfunction useThree() {\n  return useContext(stateContext);\n}\nfunction useUpdate(callback, dependents, optionalRef) {\n  const {\n    invalidate\n  } = useContext(stateContext);\n  const localRef = useRef();\n  const ref = optionalRef ? optionalRef : localRef;\n  useLayoutEffect(() => {\n    if (ref.current) {\n      callback(ref.current);\n      invalidate();\n    }\n  }, dependents);\n  return ref;\n}\nfunction useResource(optionalRef) {\n  const [_, forceUpdate] = useState(false);\n  const localRef = useRef(undefined);\n  const ref = optionalRef ? optionalRef : localRef;\n  useLayoutEffect(() => void forceUpdate(i => !i), [ref.current]);\n  return [ref, ref.current];\n}\nconst blackList = ['id', 'uuid', 'type', 'children', 'parent', 'matrix', 'matrixWorld', 'matrixWorldNeedsUpdate', 'modelViewMatrix', 'normalMatrix'];\n\nfunction prune(props) {\n  const reducedProps = _extends({}, props); // Remove black listed props\n\n\n  blackList.forEach(name => delete reducedProps[name]); // Remove functions\n\n  Object.keys(reducedProps).forEach(name => typeof reducedProps[name] === 'function' && delete reducedProps[name]); // Prune materials and geometries\n\n  if (reducedProps.material) reducedProps.material = prune(reducedProps.material);\n  if (reducedProps.geometry) reducedProps.geometry = prune(reducedProps.geometry); // Return cleansed object\n\n  return reducedProps;\n}\n\nfunction useLoader(Proto, url, extensions) {\n  const loader = useMemo(() => {\n    // Construct new loader\n    const temp = new Proto(); // Run loader extensions\n\n    if (extensions) extensions(temp);\n    return temp;\n  }, [Proto]); // Use suspense to load async assets\n\n  const results = usePromise((Proto, url) => {\n    const urlArray = Array.isArray(url) ? url : [url];\n    return Promise.all(urlArray.map(url => new Promise(res => loader.load(url, data => {\n      if (data.scene) {\n        // This has to be deprecated at some point!\n        data.__$ = []; // Nodes and materials are better\n\n        data.nodes = {};\n        data.materials = {};\n        data.scene.traverse(obj => {\n          data.__$.push(prune(obj));\n\n          if (obj.name) data.nodes = _extends({}, data.nodes, {\n            [obj.name]: obj\n          });\n          if (obj.material && !data.materials[obj.material.name]) data.materials[obj.material.name] = obj.material;\n        });\n      }\n\n      res(data);\n    }))));\n  }, [Proto, url]); // Return the object/s\n\n  return Array.isArray(url) ? results : results[0];\n}\nconst useCamera = () => {\n  console.warn(\"The useCamera hook was moved to: https://github.com/react-spring/drei\");\n  return null;\n};\n\nconst defaultStyles = {\n  position: 'relative',\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden'\n};\n\nfunction Content(_ref) {\n  let {\n    children,\n    setEvents,\n    container,\n    renderer,\n    effects\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"setEvents\", \"container\", \"renderer\", \"effects\"]);\n\n  // Create renderer\n  const [gl] = useState(renderer);\n  if (!gl) console.warn('No renderer created!'); // Mount and unmount managemenbt\n\n  useEffect(() => effects && effects(gl, container), []); // Init canvas, fetch events, hand them back to the wrapping div\n\n  const events = useCanvas(_extends({}, props, {\n    children,\n    gl: gl\n  }));\n  useEffect(() => void setEvents(events), [events]);\n  return null;\n}\n\nconst ResizeContainer = React__default.memo(function ResizeContainer(props) {\n  const {\n    preRender,\n    resize,\n    style\n  } = props,\n        restSpread = _objectWithoutPropertiesLoose(props, [\"renderer\", \"effects\", \"children\", \"vr\", \"gl2\", \"concurrent\", \"shadowMap\", \"sRGB\", \"colorManagement\", \"orthographic\", \"invalidateFrameloop\", \"updateDefaultCamera\", \"noEvents\", \"gl\", \"camera\", \"raycaster\", \"pixelRatio\", \"onCreated\", \"onPointerMissed\", \"preRender\", \"resize\", \"style\"]);\n\n  const containerRef = useRef(); // onGotPointerCaptureLegacy is a fake event used by non-web targets to simulate poinzter capture\n\n  const [_ref2, setEvents] = useState({});\n\n  const events = _objectWithoutPropertiesLoose(_ref2, [\"onGotPointerCaptureLegacy\"]);\n\n  const [bind, size] = useMeasure(resize || {\n    scroll: true,\n    debounce: {\n      scroll: 50,\n      resize: 0\n    },\n    polyfill: typeof window === 'undefined' || !window.ResizeObserver ? ResizeObserver : undefined\n  }); // Flag view ready once it's been measured out\n\n  const readyFlag = useRef(false);\n  const ready = useMemo(() => readyFlag.current = readyFlag.current || !!size.width && !!size.height, [size]);\n  const state = useMemo(() => ({\n    size,\n    setEvents,\n    container: containerRef.current\n  }), [size]); // Allow Gatsby, Next and other server side apps to run. Will output styles to reduce flickering.\n\n  if (typeof window === 'undefined') return /*#__PURE__*/React__default.createElement(\"div\", _extends({\n    style: _extends({}, defaultStyles, {}, style)\n  }, restSpread), preRender); // Render the canvas into the dom\n\n  return /*#__PURE__*/React__default.createElement(\"div\", _extends({\n    ref: mergeRefs([bind, containerRef]),\n    style: _extends({}, defaultStyles, {}, style)\n  }, events, restSpread), preRender, ready && /*#__PURE__*/React__default.createElement(Content, _extends({}, props, state)));\n});\n\nconst Canvas = React__default.memo(function Canvas(_ref) {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, [\"children\"]);\n\n  const canvasRef = useRef();\n  return /*#__PURE__*/React__default.createElement(ResizeContainer, _extends({}, props, {\n    renderer: () => {\n      if (canvasRef.current) {\n        const params = _extends({\n          antialias: true,\n          alpha: true\n        }, props.gl);\n\n        const temp = new WebGLRenderer(_extends({\n          canvas: canvasRef.current,\n          context: props.gl2 ? canvasRef.current.getContext('webgl2', params) : undefined\n        }, params));\n        return temp;\n      }\n    },\n    preRender: /*#__PURE__*/React__default.createElement(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'block'\n      }\n    })\n  }), children);\n});\nconst Dom = () => {\n  console.warn(\"The experimental Dom component was moved to: https://github.com/react-spring/drei\");\n  return null;\n};\n\nexport { Canvas, Dom, Renderer, addEffect, addTail, applyProps, createPortal, extend, invalidate, isOrthographicCamera, render, renderGl, stateContext, unmountComponentAtNode, useCamera, useCanvas, useFrame, useLoader, useResource, useThree, useUpdate };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}